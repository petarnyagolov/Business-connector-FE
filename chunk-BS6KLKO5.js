import{a as Ge}from"./chunk-CFIN5KH7.js";import{a as Ze,b as et}from"./chunk-NU6S7GW7.js";import{a as Re,b as Te,c as Me,d as Ue,e as We,f as Ye,g as Ke,h as Je,l as Qe,p as Xe}from"./chunk-NARDRQXJ.js";import"./chunk-OE4Y2OP6.js";import"./chunk-D4TCZGYH.js";import"./chunk-V22I5E4T.js";import{a as He}from"./chunk-KOM3L7EU.js";import"./chunk-I2X25UAR.js";import{a as Ae}from"./chunk-KN5H3PP4.js";import"./chunk-GUGDQATU.js";import{A as be,D as we,F as Ce,K as Se,L as qe,M as Fe,P as De,Q as Ie,c as re,e as P,g as ue,h as oe,l as ae,m as le,o as se,p as de,q as me,t as ce,u as pe,w as fe,x as ye,z as Ee}from"./chunk-7RFGPB7Y.js";import{B as ve,C as he}from"./chunk-IFXUHTWD.js";import{$a as s,Bb as u,Bc as ie,Bd as xe,C as G,Cb as y,Cc as ne,Cd as ge,Db as c,Eb as V,Ed as _e,Fa as q,Fd as ke,Gd as Pe,Hd as Be,Id as Ve,Ja as H,Jd as ze,Kd as $e,Lb as W,Ld as Oe,Md as Ne,Nd as Le,Ob as k,Od as je,Pa as p,Pb as A,Q as U,Qb as z,a as N,ab as n,b as L,ba as _,bb as i,ca as v,cb as w,gb as F,hb as D,ic as Y,jb as S,jc as K,k as j,lb as g,lc as J,mc as Q,nb as d,oc as X,uc as Z,va as T,wa as o,xb as B,yb as M,yc as ee,zc as te}from"./chunk-BKAIPBB7.js";var it=()=>["fixedPrice","priceFrom","priceTo","availableFrom","availableTo","files"];function nt(r,t){r&1&&(n(0,"div",32)(1,"mat-icon",33),u(2,"handshake"),i(),n(3,"span"),u(4,"\u0421\u0414\u0415\u041B\u041A\u0410"),i()())}function rt(r,t){if(r&1&&(n(0,"div",34)(1,"mat-icon",35),u(2,"business"),i(),n(3,"span",36),u(4,"\u0424\u0438\u0440\u043C\u0430:\xA0"),i(),n(5,"span",37),u(6),i()()),r&2){let e=d().$implicit,a=d();o(6),y(a.getCompanyNameById(e.requesterCompanyId)||"\u2014")}}function ut(r,t){if(r&1&&(n(0,"div",38)(1,"div",39)(2,"mat-icon",40),u(3,"description"),i(),n(4,"span",36),u(5,"\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435:"),i()(),n(6,"div",41)(7,"span",42),u(8),i()()()),r&2){let e=d().$implicit;o(8),y(e.description)}}function ot(r,t){if(r&1&&(n(0,"div",39)(1,"mat-icon",40),u(2,"category"),i(),n(3,"span",36),u(4,"\u0422\u0438\u043F:\xA0"),i(),n(5,"span",42),u(6),i()()),r&2){let e=d().$implicit;o(6),c(" ",e.requestType==="LOOKING_FOR_SERVICE"?"\u0422\u044A\u0440\u0441\u044F \u0443\u0441\u043B\u0443\u0433\u0430":e.requestType==="SHARE_SERVICE"?"\u041F\u0440\u0435\u0434\u043B\u0430\u0433\u0430\u043C \u0443\u0441\u043B\u0443\u0433\u0430":e.requestType==="BUY"?"\u041A\u0443\u043F\u0443\u0432\u0430\u043C":e.requestType==="SELL"?"\u041F\u0440\u043E\u0434\u0430\u0432\u0430\u043C":e.requestType==="OTHER"?"\u0414\u0440\u0443\u0433\u043E":e.requestType," ")}}function at(r,t){if(r&1&&(n(0,"div",39)(1,"mat-icon",40),u(2,"place"),i(),n(3,"span",36),u(4,"\u0420\u0435\u0433\u0438\u043E\u043D:\xA0"),i(),n(5,"span",42),u(6),i()()),r&2){let e=d().$implicit;o(6),y(e.region)}}function lt(r,t){if(r&1&&(n(0,"div",39)(1,"mat-icon",40),u(2,"inventory_2"),i(),n(3,"span",36),u(4,"\u041A\u043E\u043B\u0438\u0447\u0435\u0441\u0442\u0432\u043E:\xA0"),i(),n(5,"span",42),u(6),i()()),r&2){let e=d().$implicit,a=d();o(6),V("",e.capacity,"",e.unit?" "+a.getUnitLabel(e.unit):"")}}function st(r,t){if(r&1&&(n(0,"div",39)(1,"mat-icon",40),u(2,"build"),i(),n(3,"span",36),u(4,"\u0422\u0438\u043F \u0443\u0441\u043B\u0443\u0433\u0430:\xA0"),i(),n(5,"span",42),u(6),i()()),r&2){let e=d().$implicit;o(6),c(" ",e.serviceType==="one_time"?"\u0415\u0434\u043D\u043E\u043A\u0440\u0430\u0442\u043D\u0430":e.serviceType==="permanent"?"\u041F\u043E\u0441\u0442\u043E\u044F\u043D\u043D\u0430":e.serviceType," ")}}function dt(r,t){if(r&1&&(F(0),u(1),D()),r&2){let e=d(2).$implicit;o(),c("\u043E\u0442 ",e.priceFrom)}}function mt(r,t){if(r&1&&(F(0),u(1),D()),r&2){let e=d(2).$implicit;o(),c("\xA0\u0434\u043E ",e.priceTo)}}function ct(r,t){if(r&1&&(n(0,"div",39)(1,"mat-icon",40),u(2,"euro_symbol"),i(),n(3,"span",36),u(4,"\u0426\u0435\u043D\u0430:\xA0"),i(),n(5,"span",42),p(6,dt,2,1,"ng-container",43)(7,mt,2,1,"ng-container",43),i()()),r&2){let e=d().$implicit;o(6),s("ngIf",e.priceFrom),o(),s("ngIf",e.priceTo)}}function pt(r,t){if(r&1&&(n(0,"div",39)(1,"mat-icon",40),u(2,"work"),i(),n(3,"span",36),u(4,"\u0420\u0435\u0436\u0438\u043C:\xA0"),i(),n(5,"span",42),u(6),i()()),r&2){let e=d().$implicit;o(6),c(" ",e.workMode==="standard"?"\u0421\u0442\u0430\u043D\u0434\u0430\u0440\u0442\u043D\u043E \u0434\u0435\u043B\u043D\u0438\u0447\u043D\u043E":e.workMode==="extended"?"\u0423\u0434\u044A\u043B\u0436\u0435\u043D\u043E":e.workMode==="continuous"?"\u041D\u0435\u043F\u0440\u0435\u043A\u044A\u0441\u043D\u0430\u0442\u043E":e.workMode," ")}}function ft(r,t){if(r&1&&(n(0,"div",39)(1,"mat-icon",40),u(2,"priority_high"),i(),n(3,"span",36),u(4,"\u0421\u043F\u0435\u0448\u043D\u043E:\xA0"),i(),n(5,"span",42),u(6),i()()),r&2){let e=d().$implicit;o(6),y(e.urgent?"\u0414\u0430":"\u041D\u0435")}}function xt(r,t){if(r&1&&(F(0),u(1),k(2,"formatDateArray"),D()),r&2){let e=d(2).$implicit;o(),c("\u043E\u0442 ",A(2,1,e.availableFrom))}}function gt(r,t){if(r&1&&(F(0),u(1),k(2,"formatDateArray"),D()),r&2){let e=d(2).$implicit;o(),c(" \xA0\u0434\u043E ",A(2,1,e.availableTo))}}function _t(r,t){if(r&1&&(n(0,"div",39)(1,"mat-icon",40),u(2,"event"),i(),n(3,"span",36),u(4,"\u041F\u0435\u0440\u0438\u043E\u0434:\xA0"),i(),n(5,"span",42),p(6,xt,3,3,"ng-container",43)(7,gt,3,3,"ng-container",43),i()()),r&2){let e=d().$implicit;o(6),s("ngIf",e.availableFrom),o(),s("ngIf",e.availableTo)}}function vt(r,t){if(r&1&&(n(0,"div",39)(1,"mat-icon",40),u(2,"reply"),i(),n(3,"span",36),u(4,"\u041F\u0440\u0435\u0434\u043B\u043E\u0436\u0435\u043D\u0438\u044F:\xA0"),i(),n(5,"span",44),u(6),i()()),r&2){let e=d().$implicit;o(6),y(e.responsesCount)}}function ht(r,t){if(r&1&&(n(0,"a",52),w(1,"img",53),i()),r&2){let e=d().$implicit;s("href",e.url,T)("title",e.name),o(),s("src",e.url,T)("alt",e.name)}}function yt(r,t){if(r&1&&(n(0,"a",54)(1,"mat-icon",55),u(2,"picture_as_pdf"),i(),n(3,"span",56),u(4),i()()),r&2){let e=d().$implicit;s("href",e.url,T)("title",e.name),o(4),y(e.name)}}function Et(r,t){if(r&1&&(F(0),p(1,ht,2,4,"a",50)(2,yt,5,3,"a",51),D()),r&2){let e=t.$implicit;o(),s("ngIf",e.isImage),o(),s("ngIf",!e.isImage)}}function bt(r,t){if(r&1&&(n(0,"div",45)(1,"mat-icon",46),u(2,"attach_file"),i(),n(3,"span",47),u(4,"\u0424\u0430\u0439\u043B\u043E\u0432\u0435:"),i(),n(5,"div",48),p(6,Et,3,2,"ng-container",49),i()()),r&2){let e=d().$implicit;o(6),s("ngForOf",e.files)}}function wt(r,t){if(r&1&&(n(0,"div",57)(1,"mat-icon",58),u(2,"lock"),i(),n(3,"span",59),u(4),i(),n(5,"span",60),u(6,"(\u0412\u043B\u0435\u0437\u0442\u0435, \u0437\u0430 \u0434\u0430 \u0432\u0438\u0434\u0438\u0442\u0435 \u0444\u0430\u0439\u043B\u043E\u0432\u0435\u0442\u0435)"),i()()),r&2){let e=d().$implicit;o(4),c("\u041F\u0440\u0438\u043A\u0430\u0447\u0435\u043D\u0438 \u0444\u0430\u0439\u043B\u043E\u0432\u0435: ",e.filesCount)}}function Ct(r,t){if(r&1){let e=S();n(0,"img",64),g("click",function(){_(e);let l=d().$implicit,m=d(3);return v(m.onImageClick(l))}),i()}if(r&2){let e=d().$implicit,a=d(3);s("src",a.pictureBlobs[e]||a.getPictureUrl(e),T)}}function St(r,t){if(r&1&&(F(0),p(1,Ct,1,1,"img",63),D()),r&2){let e=t.$implicit;o(),s("ngIf",e)}}function qt(r,t){if(r&1&&(n(0,"div",61)(1,"mat-icon",46),u(2,"image"),i(),n(3,"span",47),u(4,"\u0421\u043D\u0438\u043C\u043A\u0438:"),i(),n(5,"div",62),p(6,St,2,1,"ng-container",49),i()()),r&2){let e=d().$implicit,a=d();o(6),s("ngForOf",a.getPictureUrls(e))}}function Ft(r,t){if(r&1){let e=S();n(0,"button",65),g("click",function(){_(e);let l=d().$implicit,m=d();return v(m.editRequest(l))}),n(1,"mat-icon"),u(2,"edit"),i(),u(3," \u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u0430\u0439 "),i()}if(r&2){let e=d().$implicit;s("disabled",e.status==="DEAL")("title",e.status==="DEAL"?"\u041D\u0435 \u043C\u043E\u0436\u0435 \u0434\u0430 \u0441\u0435 \u0440\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u0430 \u043F\u0443\u0431\u043B\u0438\u043A\u0430\u0446\u0438\u044F \u0441\u044A\u0441 \u0441\u0434\u0435\u043B\u043A\u0430":"\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u0430\u0439 \u043F\u0443\u0431\u043B\u0438\u043A\u0430\u0446\u0438\u044F\u0442\u0430")}}function Dt(r,t){if(r&1){let e=S();n(0,"mat-card",16),p(1,nt,5,0,"div",17),n(2,"mat-card-header")(3,"mat-icon",18),u(4,"campaign"),i(),n(5,"mat-card-title",19),u(6),i(),n(7,"mat-card-subtitle",20),u(8),k(9,"uppercase"),i()(),p(10,rt,7,1,"div",21),n(11,"mat-card-content")(12,"div",22),p(13,ut,9,1,"div",23)(14,ot,7,1,"div",24)(15,at,7,1,"div",24)(16,lt,7,2,"div",24)(17,st,7,1,"div",24)(18,ct,8,2,"div",24)(19,pt,7,1,"div",24)(20,ft,7,1,"div",24)(21,_t,8,2,"div",24)(22,vt,7,1,"div",24)(23,bt,7,1,"div",25)(24,wt,7,1,"div",26)(25,qt,7,1,"div",27),i()(),n(26,"mat-card-actions",28),p(27,Ft,4,2,"button",29),n(28,"button",30),g("click",function(){let l=_(e).$implicit,m=d();return v(m.deleteRequest(l.id))}),n(29,"mat-icon"),u(30,"delete"),i(),u(31," \u0421\u0432\u0430\u043B\u0438 "),i(),n(32,"button",31),g("click",function(){let l=_(e).$implicit,m=d();return v(m.viewRequestDetails(l.id))}),n(33,"mat-icon"),u(34,"visibility"),i(),u(35," \u0412\u0438\u0436 "),i()()()}if(r&2){let e=t.$implicit,a=d();M("background",e.status==="DEAL"?"#f5f5f5":"#ffffff"),o(),s("ngIf",e.status==="DEAL"),o(),M("opacity",e.status==="DEAL"?"0.6":"1"),o(4),y(e.title),o(2),y(A(9,26,e.requesterName)),o(2),s("ngIf",e.requesterCompanyId),o(),M("opacity",e.status==="DEAL"?"0.6":"1"),o(2),s("ngIf",e.description),o(),s("ngIf",e.requestType),o(),s("ngIf",e.region),o(),s("ngIf",e.capacity),o(),s("ngIf",e.serviceType),o(),s("ngIf",e.priceFrom||e.priceTo),o(),s("ngIf",e.workMode&&e.workMode!=="nomatter"),o(),s("ngIf",e.urgent!==void 0),o(),s("ngIf",e.availableFrom||e.availableTo),o(),s("ngIf",e.responsesCount!==void 0),o(),s("ngIf",e.files&&e.files.length),o(),s("ngIf",(!e.files||e.files.length===0)&&e.filesCount&&e.filesCount>0),o(),s("ngIf",(!e.files||!e.files.length)&&a.getPictureUrls(e).length),o(2),s("ngIf",!e.responsesCount||e.responsesCount===0),o(),s("disabled",e.status==="DEAL")("title",e.status==="DEAL"?"\u041D\u0435 \u043C\u043E\u0436\u0435 \u0434\u0430 \u0441\u0435 \u0441\u0432\u0430\u043B\u0438 \u043F\u0443\u0431\u043B\u0438\u043A\u0430\u0446\u0438\u044F \u0441\u044A\u0441 \u0441\u0434\u0435\u043B\u043A\u0430":"\u0421\u0432\u0430\u043B\u0438 \u043F\u0443\u0431\u043B\u0438\u043A\u0430\u0446\u0438\u044F\u0442\u0430")}}function It(r,t){if(r&1){let e=S();n(0,"button",66),g("click",function(){_(e);let l=d();return v(l.onCancel())}),u(1," \u041E\u0442\u043A\u0430\u0436\u0438 \u041F\u0443\u0431\u043B\u0438\u043A\u0430\u0446\u0438\u044F "),i()}}function Rt(r,t){if(r&1){let e=S();n(0,"div",67),g("click",function(){_(e);let l=d();return v(l.closeImageDialog())}),n(1,"img",68),g("click",function(l){return _(e),v(l.stopPropagation())}),i(),n(2,"button",69),g("click",function(){_(e);let l=d();return v(l.closeImageDialog())}),u(3,"\xD7"),i()()}if(r&2){let e=d();o(),s("src",e.selectedImage,T)}}function Tt(r,t){if(r&1){let e=S();n(0,"div",70),g("click",function(){_(e);let l=d();return v(l.closeSuccessModal())}),n(1,"div",71),g("click",function(l){return _(e),v(l.stopPropagation())}),n(2,"div",72)(3,"div",73)(4,"mat-icon",74),u(5,"check"),i()(),n(6,"h3",75),u(7),i()(),n(8,"div",76)(9,"p",77),u(10),i()(),n(11,"div",78)(12,"button",79),g("click",function(){_(e);let l=d();return v(l.closeSuccessModal())}),u(13),i()()()()}if(r&2){let e=d();o(7),c(" ",e.successModalData.title," "),o(3),c(" ",e.successModalData.message," "),o(3),c(" ",e.successModalData.buttonText," ")}}function Mt(r,t){if(r&1){let e=S();n(0,"div",80),g("click",function(){_(e);let l=d();return v(l.closeConfirmModal())}),n(1,"div",81),g("click",function(l){return _(e),v(l.stopPropagation())}),n(2,"div",72)(3,"div",82)(4,"mat-icon",74),u(5,"help"),i()(),n(6,"h3",75),u(7),i()(),n(8,"div",76)(9,"p",77),u(10),i()(),n(11,"div",83)(12,"button",84),g("click",function(){_(e);let l=d();return v(l.closeConfirmModal())}),u(13),i(),n(14,"button",85),g("click",function(){_(e);let l=d();return v(l.confirmDeleteAction())}),u(15),i()()()()}if(r&2){let e=d();o(7),c(" ",e.confirmModalData.title," "),o(3),c(" ",e.confirmModalData.message," "),o(3),c(" ",e.confirmModalData.cancelText," "),o(2),c(" ",e.confirmModalData.confirmText," ")}}function kt(r,t){r&1&&(n(0,"div",120)(1,"mat-icon",121),u(2,"warning"),i(),u(3," \u0421\u041F\u0415\u0428\u041D\u041E "),i())}function Pt(r,t){if(r&1&&(n(0,"div",108)(1,"mat-icon",109),u(2,"event"),i(),n(3,"strong"),u(4,"\u041D\u0435\u043E\u0431\u0445\u043E\u0434\u0438\u043C\u043E \u0441\u043B\u0435\u0434:"),i(),u(5),k(6,"date"),i()),r&2){let e=d(3);o(5),c(" ",z(6,1,e.modalPreviewData==null?null:e.modalPreviewData.activeFrom,"dd.MM.yyyy")," ")}}function At(r,t){if(r&1&&(n(0,"div",108)(1,"mat-icon",109),u(2,"event"),i(),n(3,"strong"),u(4,"\u041D\u0435\u043E\u0431\u0445\u043E\u0434\u0438\u043C\u043E \u043F\u0440\u0435\u0434\u0438:"),i(),u(5),k(6,"date"),i()),r&2){let e=d(3);o(5),c(" ",z(6,1,e.modalPreviewData==null?null:e.modalPreviewData.activeTo,"dd.MM.yyyy")," ")}}function Ut(r,t){if(r&1&&(n(0,"div",108)(1,"mat-icon",109),u(2,"build"),i(),n(3,"strong"),u(4,"\u0422\u0438\u043F \u0443\u0441\u043B\u0443\u0433\u0430:"),i(),u(5),i()),r&2){let e=d(3);o(5),c(" ",e.modalPreviewData==null?null:e.modalPreviewData.serviceType," ")}}function Bt(r,t){if(r&1&&(n(0,"span"),u(1),i()),r&2){let e=d(4);o(),y(e.modalPreviewData==null?null:e.modalPreviewData.unit)}}function Vt(r,t){if(r&1&&(n(0,"div",108)(1,"mat-icon",109),u(2,"inventory_2"),i(),n(3,"strong"),u(4,"\u041A\u0430\u043F\u0430\u0446\u0438\u0442\u0435\u0442:"),i(),u(5),p(6,Bt,2,1,"span",43),i()),r&2){let e=d(3);o(5),c(" ",e.modalPreviewData==null?null:e.modalPreviewData.capacity," "),o(),s("ngIf",e.modalPreviewData==null?null:e.modalPreviewData.unit)}}function zt(r,t){if(r&1&&(n(0,"div",108)(1,"mat-icon",109),u(2,"schedule"),i(),n(3,"strong"),u(4,"\u0420\u0430\u0431\u043E\u0442\u043D\u043E \u0432\u0440\u0435\u043C\u0435:"),i(),u(5),i()),r&2){let e=d(3);o(5),c(" ",e.modalPreviewData==null?null:e.modalPreviewData.workMode," ")}}function $t(r,t){if(r&1&&(n(0,"div",108)(1,"mat-icon",109),u(2,"euro"),i(),n(3,"strong"),u(4,"\u0424\u0438\u043A\u0441\u0438\u0440\u0430\u043D\u0430 \u0446\u0435\u043D\u0430:"),i(),u(5),i()),r&2){let e=d(3);o(5),c(" ",e.modalPreviewData==null?null:e.modalPreviewData.fixedPrice,"\u20AC ")}}function Ot(r,t){if(r&1&&(n(0,"span"),u(1),i()),r&2){let e=d(4);o(),c("\u043E\u0442 ",e.modalPreviewData==null?null:e.modalPreviewData.priceFrom,"\u20AC")}}function Nt(r,t){if(r&1&&(n(0,"span"),u(1),i()),r&2){let e=d(4);o(),c("\u0434\u043E ",e.modalPreviewData==null?null:e.modalPreviewData.priceTo,"\u20AC")}}function Lt(r,t){if(r&1&&(n(0,"div",108)(1,"mat-icon",109),u(2,"euro"),i(),n(3,"strong"),u(4,"\u0426\u0435\u043D\u043E\u0432\u0438 \u0434\u0438\u0430\u043F\u0430\u0437\u043E\u043D:"),i(),p(5,Ot,2,1,"span",43)(6,Nt,2,1,"span",43),i()),r&2){let e=d(3);o(5),s("ngIf",e.modalPreviewData==null?null:e.modalPreviewData.priceFrom),o(),s("ngIf",e.modalPreviewData==null?null:e.modalPreviewData.priceTo)}}function jt(r,t){if(r&1&&(n(0,"span",126),u(1),i()),r&2){let e=t.$implicit;o(),c(" ",e==="fixedPrice"?"\u0424\u0438\u043A\u0441\u0438\u0440\u0430\u043D\u0430 \u0446\u0435\u043D\u0430":e==="priceFrom"?"\u0426\u0435\u043D\u0430 \u043E\u0442":e==="priceTo"?"\u0426\u0435\u043D\u0430 \u0434\u043E":e==="availableFrom"?"\u041D\u0430\u043B\u0438\u0447\u043D\u043E/\u0421\u0432\u043E\u0431\u043E\u0434\u0435\u043D \u043E\u0442":e==="availableTo"?"\u041D\u0430\u043B\u0438\u0447\u043D\u043E/\u0421\u0432\u043E\u0431\u043E\u0434\u0435\u043D \u0434\u043E":e==="files"?"\u0424\u0430\u0439\u043B\u043E\u0432\u0435":e," ")}}function Gt(r,t){if(r&1&&(n(0,"div",122)(1,"strong",123),u(2,"\u0417\u0430\u0434\u044A\u043B\u0436\u0438\u0442\u0435\u043B\u043D\u0438 \u043F\u043E\u043B\u0435\u0442\u0430:"),i(),n(3,"div",124),p(4,jt,2,1,"span",125),i()()),r&2){let e=d(3);o(4),s("ngForOf",e.modalPreviewData==null?null:e.modalPreviewData.requiredFields)}}function Ht(r,t){if(r&1&&(n(0,"div",129)(1,"mat-icon",130),u(2),i(),n(3,"span"),u(4),i()()),r&2){let e=t.$implicit;o(),M("color",e.type.startsWith("image/")?"#1976d2":"#f44336"),o(),c(" ",e.type.startsWith("image/")?"image":"picture_as_pdf"," "),o(2),y(e.name)}}function Wt(r,t){if(r&1&&(n(0,"div",127)(1,"strong",111),u(2),i(),n(3,"div",124),p(4,Ht,5,4,"div",128),i()()),r&2){let e=d(3);o(2),c("\u041F\u0440\u0438\u043A\u0430\u0447\u0435\u043D\u0438 \u0444\u0430\u0439\u043B\u043E\u0432\u0435 (",e.modalPreviewData==null?null:e.modalPreviewData.files.length,"):"),o(2),s("ngForOf",e.modalPreviewData==null?null:e.modalPreviewData.files)}}function Yt(r,t){if(r&1){let e=S();n(0,"div",90)(1,"mat-card",91)(2,"mat-card-header",92)(3,"mat-card-title",93)(4,"mat-icon",94),u(5,"visibility"),i(),u(6),i(),n(7,"button",95),g("click",function(){_(e);let l=d(2);return v(l.closeCreateRequestModal())}),n(8,"mat-icon"),u(9,"close"),i()()(),n(10,"mat-card-content",96)(11,"div",97)(12,"div",98)(13,"mat-icon",99),u(14,"info"),i(),n(15,"span"),u(16),i()()(),n(17,"mat-card",100)(18,"mat-card-header",101)(19,"mat-icon",102),u(20," business "),i(),n(21,"mat-card-title",103),u(22),i(),n(23,"mat-card-subtitle",104),u(24),i()(),n(25,"mat-card-content",90),p(26,kt,4,0,"div",105),n(27,"h2",106),u(28),i(),n(29,"div",107)(30,"div",108)(31,"mat-icon",109),u(32,"storage"),i(),n(33,"strong"),u(34,"\u0422\u0438\u043F:"),i(),u(35),i(),n(36,"div",108)(37,"mat-icon",109),u(38,"location_on"),i(),n(39,"strong"),u(40,"\u0420\u0435\u0433\u0438\u043E\u043D:"),i(),u(41),i(),n(42,"div",110)(43,"strong",111),u(44,"\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435:"),i(),n(45,"p",112),u(46),i()(),p(47,Pt,7,4,"div",113)(48,At,7,4,"div",113)(49,Ut,6,1,"div",113)(50,Vt,7,2,"div",113)(51,zt,6,1,"div",113)(52,$t,6,1,"div",113)(53,Lt,7,2,"div",113)(54,Gt,5,1,"div",114)(55,Wt,5,2,"div",115),i()()()(),n(56,"mat-card-actions",116)(57,"button",117),g("click",function(){_(e);let l=d(2);return v(l.cancelModalPreview())}),n(58,"mat-icon",118),u(59,"arrow_back"),i(),u(60," \u041E\u0442\u043A\u0430\u0436\u0438 - \u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u0430\u0439 "),i(),n(61,"button",119),g("click",function(){_(e);let l=d(2);return v(l.confirmModalPublish())}),n(62,"mat-icon",118),u(63),i(),u(64),i()()()()}if(r&2){let e=d(2);o(6),c(" ",e.isEditMode?"\u041F\u0440\u0435\u0433\u043B\u0435\u0434 \u043F\u0440\u0435\u0434\u0438 \u0437\u0430\u043F\u0430\u0437\u0432\u0430\u043D\u0435":"\u041F\u0440\u0435\u0433\u043B\u0435\u0434 \u043F\u0440\u0435\u0434\u0438 \u043F\u0443\u0431\u043B\u0438\u043A\u0443\u0432\u0430\u043D\u0435"," "),o(10),y(e.isEditMode?"\u041F\u0440\u0435\u0433\u043B\u0435\u0434\u0430\u0439\u0442\u0435 \u043F\u0440\u043E\u043C\u0435\u043D\u0438\u0442\u0435 \u043F\u0440\u0435\u0434\u0438 \u0434\u0430 \u0433\u0438 \u0437\u0430\u043F\u0430\u0437\u0438\u0442\u0435":"\u041F\u0440\u0435\u0433\u043B\u0435\u0434\u0430\u0439\u0442\u0435 \u043F\u0443\u0431\u043B\u0438\u043A\u0430\u0446\u0438\u044F\u0442\u0430 \u043F\u0440\u0435\u0434\u0438 \u0434\u0430 \u044F \u043F\u0443\u0431\u043B\u0438\u043A\u0443\u0432\u0430\u0442\u0435"),o(6),y(e.modalPreviewData==null?null:e.modalPreviewData.companyName),o(2),c("\u0415\u0418\u041A: ",e.modalPreviewData==null?null:e.modalPreviewData.companyVat),o(2),s("ngIf",e.modalPreviewData==null?null:e.modalPreviewData.urgent),o(2),y(e.modalPreviewData==null?null:e.modalPreviewData.title),o(7),c(" ",e.modalPreviewData==null?null:e.modalPreviewData.requestType," "),o(6),c(" ",e.modalPreviewData==null?null:e.modalPreviewData.region," "),o(5),y(e.modalPreviewData==null?null:e.modalPreviewData.description),o(),s("ngIf",e.modalPreviewData==null?null:e.modalPreviewData.activeFrom),o(),s("ngIf",e.modalPreviewData==null?null:e.modalPreviewData.activeTo),o(),s("ngIf",e.modalPreviewData==null?null:e.modalPreviewData.serviceType),o(),s("ngIf",e.modalPreviewData==null?null:e.modalPreviewData.capacity),o(),s("ngIf",e.modalPreviewData==null?null:e.modalPreviewData.workMode),o(),s("ngIf",e.modalPreviewData==null?null:e.modalPreviewData.fixedPrice),o(),s("ngIf",(e.modalPreviewData==null?null:e.modalPreviewData.priceFrom)||(e.modalPreviewData==null?null:e.modalPreviewData.priceTo)),o(),s("ngIf",(e.modalPreviewData==null||e.modalPreviewData.requiredFields==null?null:e.modalPreviewData.requiredFields.length)>0),o(),s("ngIf",(e.modalPreviewData==null||e.modalPreviewData.files==null?null:e.modalPreviewData.files.length)>0),o(8),y(e.isEditMode?"save":"publish"),o(),c(" ",e.isEditMode?"\u0417\u0430\u043F\u0430\u0437\u0438 \u043F\u0440\u043E\u043C\u0435\u043D\u0438\u0442\u0435":"\u041F\u0443\u0431\u043B\u0438\u043A\u0443\u0432\u0430\u0439"," ")}}function Kt(r,t){r&1&&(n(0,"span"),u(1,"\u041D\u044F\u043C\u0430\u0442\u0435 \u043A\u0440\u0435\u0434\u0438\u0442\u0438! \u0417\u0430\u043A\u0443\u043F\u0435\u0442\u0435 \u043A\u0440\u0435\u0434\u0438\u0442\u0438 \u0437\u0430 \u0434\u0430 \u0441\u044A\u0437\u0434\u0430\u0432\u0430\u0442\u0435 \u043F\u0443\u0431\u043B\u0438\u043A\u0430\u0446\u0438\u0438.(\u0410\u043A\u0430\u0443\u043D\u0442 -> \u041A\u0443\u043F\u0438 \u043A\u0440\u0435\u0434\u0438\u0442\u0438)"),i())}function Jt(r,t){r&1&&(n(0,"span"),u(1,"\u0418\u043C\u0430\u0442\u0435 \u0441\u0430\u043C\u043E 1 \u043A\u0440\u0435\u0434\u0438\u0442 \u043E\u0441\u0442\u0430\u043D\u0430\u043B. \u0421\u043B\u0435\u0434 \u0442\u0430\u0437\u0438 \u043F\u0443\u0431\u043B\u0438\u043A\u0430\u0446\u0438\u044F \u0449\u0435 \u0442\u0440\u044F\u0431\u0432\u0430 \u0434\u0430 \u0437\u0430\u043A\u0443\u043F\u0438\u0442\u0435 \u043E\u0449\u0435."),i())}function Qt(r,t){if(r&1&&(n(0,"div",173)(1,"mat-icon",174),u(2,"warning"),i(),n(3,"span",175),p(4,Kt,2,0,"span",43)(5,Jt,2,0,"span",43),i()()),r&2){let e=d(3);o(4),s("ngIf",e.creditsService.getCurrentCredits()===0),o(),s("ngIf",e.creditsService.getCurrentCredits()===1)}}function Xt(r,t){if(r&1&&(n(0,"mat-option",140),u(1),i()),r&2){let e=t.$implicit;s("value",e.vatNumber),o(),V(" ",e.name," (",e.vatNumber,") ")}}function Zt(r,t){r&1&&(n(0,"mat-error"),u(1,"\u0424\u0438\u0440\u043C\u0430\u0442\u0430 \u0435 \u0437\u0430\u0434\u044A\u043B\u0436\u0438\u0442\u0435\u043B\u043D\u0430"),i())}function ei(r,t){r&1&&(n(0,"mat-error"),u(1,"\u0420\u0435\u0433\u0438\u043E\u043D\u044A\u0442 \u0435 \u0437\u0430\u0434\u044A\u043B\u0436\u0438\u0442\u0435\u043B\u0435\u043D"),i())}function ti(r,t){r&1&&(n(0,"mat-error"),u(1,"\u0420\u0435\u0433\u0438\u043E\u043D\u044A\u0442 \u0442\u0440\u044F\u0431\u0432\u0430 \u0434\u0430 \u0435 \u0434\u043E 50 \u0441\u0438\u043C\u0432\u043E\u043B\u0430"),i())}function ii(r,t){r&1&&(n(0,"mat-error"),u(1,"\u0422\u0438\u043F\u044A\u0442 \u0435 \u0437\u0430\u0434\u044A\u043B\u0436\u0438\u0442\u0435\u043B\u0435\u043D"),i())}function ni(r,t){r&1&&(n(0,"mat-error"),u(1,"\u0422\u0438\u043F\u044A\u0442 \u0442\u0440\u044F\u0431\u0432\u0430 \u0434\u0430 \u0435 \u0434\u043E 50 \u0441\u0438\u043C\u0432\u043E\u043B\u0430"),i())}function ri(r,t){r&1&&(n(0,"mat-error"),u(1,"\u0417\u0430\u0433\u043B\u0430\u0432\u0438\u0435\u0442\u043E \u0435 \u0437\u0430\u0434\u044A\u043B\u0436\u0438\u0442\u0435\u043B\u043D\u043E"),i())}function ui(r,t){r&1&&(n(0,"mat-error"),u(1,"\u0417\u0430\u0433\u043B\u0430\u0432\u0438\u0435\u0442\u043E \u0442\u0440\u044F\u0431\u0432\u0430 \u0434\u0430 \u0435 \u0434\u043E 255 \u0441\u0438\u043C\u0432\u043E\u043B\u0430"),i())}function oi(r,t){r&1&&(n(0,"mat-error"),u(1,"\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435\u0442\u043E \u0435 \u0437\u0430\u0434\u044A\u043B\u0436\u0438\u0442\u0435\u043B\u043D\u043E"),i())}function ai(r,t){r&1&&(n(0,"mat-error"),u(1,"\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435\u0442\u043E \u0442\u0440\u044F\u0431\u0432\u0430 \u0434\u0430 \u0435 \u0434\u043E 500 \u0441\u0438\u043C\u0432\u043E\u043B\u0430"),i())}function li(r,t){r&1&&(n(0,"mat-form-field",187)(1,"mat-label"),u(2,"\u0420\u0435\u0436\u0438\u043C \u0440\u0430\u0431\u043E\u0442\u043D\u043E \u0432\u0440\u0435\u043C\u0435"),i(),n(3,"mat-select",188)(4,"mat-option",189),u(5,"\u0411\u0435\u0437 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435"),i(),n(6,"mat-option",190),u(7,"\u0421\u0442\u0430\u043D\u0434\u0430\u0440\u0442\u043D\u043E \u0434\u0435\u043B\u043D\u0438\u0447\u043D\u043E"),i(),n(8,"mat-option",191),u(9,"\u0423\u0434\u044A\u043B\u0436\u0435\u043D\u043E"),i(),n(10,"mat-option",192),u(11,"\u041D\u0435\u043F\u0440\u0435\u043A\u044A\u0441\u043D\u0430\u0442\u043E"),i()()())}function si(r,t){if(r&1&&(F(0),n(1,"mat-label",176),u(2,"\u0422\u0438\u043F \u0443\u0441\u043B\u0443\u0433\u0430"),i(),n(3,"mat-radio-group",177)(4,"mat-radio-button",178),u(5,"\u0415\u0434\u043D\u043E\u043A\u0440\u0430\u0442\u043D\u0430"),i(),n(6,"mat-radio-button",179),u(7,"\u041F\u043E\u0441\u0442\u043E\u044F\u043D\u043D\u0430"),i()(),n(8,"div",180)(9,"mat-form-field",143)(10,"mat-label"),u(11,"\u041A\u0430\u043F\u0430\u0446\u0438\u0442\u0435\u0442 (\u0431\u0440\u043E\u0439, \u043E\u0431\u043E\u0440\u0443\u0434\u0432\u0430\u043D\u0435 \u0438\u043B\u0438 \u043A\u043E\u043B\u0438\u0447\u0435\u0441\u0442\u0432\u043E)"),i(),w(12,"input",181),i(),n(13,"mat-form-field",143)(14,"mat-label"),u(15,"\u0415\u0434\u0438\u043D\u0438\u0446\u0430"),i(),n(16,"mat-select",182)(17,"mat-option",183),u(18,"\u0411\u0440\u043E\u0439"),i(),n(19,"mat-option",184),u(20,"\u041A\u0430\u0448\u043E\u043D"),i(),n(21,"mat-option",185),u(22,"\u041F\u0430\u043B\u0435"),i()()()(),p(23,li,12,0,"mat-form-field",186),D()),r&2){let e,a=d(3);o(23),s("ngIf",((e=a.requestForm.get("requestType"))==null?null:e.value)!=="BUY"&&((e=a.requestForm.get("requestType"))==null?null:e.value)!=="SELL")}}function di(r,t){r&1&&(F(0),n(1,"mat-form-field",138)(2,"mat-label"),u(3,"\u0424\u0438\u043A\u0441\u0438\u0440\u0430\u043D\u0430 \u0446\u0435\u043D\u0430"),i(),w(4,"input",193),i(),n(5,"div",194)(6,"mat-form-field",143)(7,"mat-label"),u(8,"\u0426\u0435\u043D\u0430 \u043E\u0442"),i(),w(9,"input",195),i(),n(10,"mat-form-field",143)(11,"mat-label"),u(12,"\u0426\u0435\u043D\u0430 \u0434\u043E"),i(),w(13,"input",196),i()(),D())}function mi(r,t){if(r&1&&(n(0,"div",197)(1,"mat-icon",198),u(2,"check_circle"),i(),u(3),i()),r&2){let e=d(3);o(3),c(" \u0423\u0441\u043F\u0435\u0448\u043D\u043E \u0438\u0437\u0431\u0440\u0430\u043D\u0438 ",e.modalSelectedFiles.length," \u0444\u0430\u0439\u043B\u0430 ")}}function ci(r,t){if(r&1){let e=S();n(0,"div",201)(1,"div",202)(2,"mat-icon",203),u(3),i(),n(4,"span",204),u(5),i()(),n(6,"button",205),g("click",function(){let l=_(e).index,m=d(4);return v(m.removeFile(l))}),n(7,"mat-icon",135),u(8,"delete"),i()()()}if(r&2){let e=t.$implicit;o(2),M("color",e.type.startsWith("image/")?"#1976d2":"#f44336"),o(),c(" ",e.type.startsWith("image/")?"image":"picture_as_pdf"," "),o(2),y(e.name)}}function pi(r,t){if(r&1&&(n(0,"div",199),p(1,ci,9,4,"div",200),i()),r&2){let e=d(3);o(),s("ngForOf",e.modalSelectedFiles)}}function fi(r,t){if(r&1&&(n(0,"mat-option",140),u(1),i()),r&2){let e,a=t.$implicit,l=d(3);s("value",a),o(),c(" ",a==="fixedPrice"?"\u0424\u0438\u043A\u0441\u0438\u0440\u0430\u043D\u0430 \u0446\u0435\u043D\u0430":a==="priceFrom"?"\u0426\u0435\u043D\u0430 \u043E\u0442":a==="priceTo"?"\u0426\u0435\u043D\u0430 \u0434\u043E":a==="availableFrom"&&(((e=l.requestForm.get("requestType"))==null?null:e.value)==="LOOKING_FOR_SERVICE"||((e=l.requestForm.get("requestType"))==null?null:e.value)==="SHARE_SERVICE")?"\u0421\u0432\u043E\u0431\u043E\u0434\u0435\u043D \u043E\u0442":a==="availableTo"&&(((e=l.requestForm.get("requestType"))==null?null:e.value)==="LOOKING_FOR_SERVICE"||((e=l.requestForm.get("requestType"))==null?null:e.value)==="SHARE_SERVICE")?"\u0421\u0432\u043E\u0431\u043E\u0434\u0435\u043D \u0434\u043E":a==="availableFrom"?"\u041D\u0430\u043B\u0438\u0447\u043D\u043E \u043E\u0442":a==="availableTo"?"\u041D\u0430\u043B\u0438\u0447\u043D\u043E \u0434\u043E":a==="files"?"\u0424\u0430\u0439\u043B\u043E\u0432\u0435":a," ")}}function xi(r,t){r&1&&(n(0,"mat-icon",118),u(1,"visibility"),i())}function gi(r,t){r&1&&(n(0,"span",207),u(1," (\u041D\u044F\u043C\u0430 \u043A\u0440\u0435\u0434\u0438\u0442\u0438)"),i())}function _i(r,t){if(r&1&&(n(0,"span"),u(1," \u041F\u0440\u0435\u0433\u043B\u0435\u0434 \u0438 \u043F\u0443\u0431\u043B\u0438\u043A\u0443\u0432\u0430\u043D\u0435 "),p(2,gi,2,0,"span",206),i()),r&2){let e=d(3);o(2),s("ngIf",e.creditsService.getCurrentCredits()<=0)}}function vi(r,t){r&1&&(n(0,"span"),u(1,"\u0421\u044A\u0437\u0434\u0430\u0432\u0430 \u0441\u0435..."),i())}function hi(r,t){if(r&1){let e=S();n(0,"form",131),g("ngSubmit",function(){_(e);let l=d(2);return v(l.onSubmitRequest())}),n(1,"mat-card",91)(2,"mat-card-header",132)(3,"mat-card-title")(4,"div",133)(5,"span"),u(6),i(),n(7,"div",134)(8,"mat-icon",135),u(9,"account_balance_wallet"),i(),n(10,"span"),u(11),i()()()(),n(12,"button",95),g("click",function(){_(e);let l=d(2);return v(l.closeCreateRequestModal())}),n(13,"mat-icon"),u(14,"close"),i()()(),n(15,"mat-card-content"),p(16,Qt,6,2,"div",136),n(17,"div",137)(18,"mat-form-field",138)(19,"mat-label"),u(20,"\u0424\u0438\u0440\u043C\u0430"),i(),n(21,"mat-select",139)(22,"mat-option",140),u(23,"-- \u0418\u0437\u0431\u0435\u0440\u0438 \u0424\u0438\u0440\u043C\u0430 --"),i(),p(24,Xt,2,3,"mat-option",141),i(),p(25,Zt,2,0,"mat-error",43),i(),n(26,"div",142)(27,"mat-form-field",143)(28,"mat-label"),u(29,"\u0420\u0435\u0433\u0438\u043E\u043D"),i(),w(30,"input",144),p(31,ei,2,0,"mat-error",43)(32,ti,2,0,"mat-error",43),i(),n(33,"mat-form-field",143)(34,"mat-label"),u(35,"\u0422\u0438\u043F \u043F\u0443\u0431\u043B\u0438\u043A\u0430\u0446\u0438\u044F"),i(),n(36,"mat-select",145)(37,"mat-option",146),u(38,"\u0422\u044A\u0440\u0441\u044F \u0443\u0441\u043B\u0443\u0433\u0430"),i(),n(39,"mat-option",147),u(40,"\u041F\u0440\u0435\u0434\u043B\u0430\u0433\u0430\u043C \u0443\u0441\u043B\u0443\u0433\u0430"),i(),n(41,"mat-option",148),u(42,"\u041A\u0443\u043F\u0443\u0432\u0430\u043C"),i(),n(43,"mat-option",149),u(44,"\u041F\u0440\u043E\u0434\u0430\u0432\u0430\u043C"),i(),n(45,"mat-option",150),u(46,"\u0414\u0440\u0443\u0433\u043E"),i()(),p(47,ii,2,0,"mat-error",43)(48,ni,2,0,"mat-error",43),i()(),n(49,"mat-form-field",138)(50,"mat-label"),u(51,"\u0417\u0430\u0433\u043B\u0430\u0432\u0438\u0435"),i(),w(52,"input",151),p(53,ri,2,0,"mat-error",43)(54,ui,2,0,"mat-error",43),i(),n(55,"mat-form-field",138)(56,"mat-label"),u(57,"\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435"),i(),w(58,"textarea",152),p(59,oi,2,0,"mat-error",43)(60,ai,2,0,"mat-error",43),i(),n(61,"div",153)(62,"mat-form-field",143)(63,"mat-label"),u(64,"\u041D\u0435\u043E\u0431\u0445\u043E\u0434\u0438\u043C\u043E \u0441\u043B\u0435\u0434"),i(),w(65,"input",154)(66,"mat-datepicker-toggle",155)(67,"mat-datepicker",null,0),i(),n(69,"mat-form-field",143)(70,"mat-label"),u(71,"\u041D\u0435\u043E\u0431\u0445\u043E\u0434\u0438\u043C\u043E \u043F\u0440\u0435\u0434\u0438"),i(),w(72,"input",156)(73,"mat-datepicker-toggle",155)(74,"mat-datepicker",null,1),i(),n(76,"mat-checkbox",157),u(77,"\u0421\u043F\u0435\u0448\u043D\u043E"),i()(),p(78,si,24,1,"ng-container",43)(79,di,14,0,"ng-container",43),n(80,"div",158)(81,"div",159)(82,"label",160)(83,"mat-icon",161),u(84,"attach_file"),i(),u(85," \u041F\u0440\u0438\u043A\u0430\u0447\u0435\u0442\u0435 \u0444\u0430\u0439\u043B\u043E\u0432\u0435 (\u0441\u043D\u0438\u043C\u043A\u0438, PDF) "),i(),n(86,"button",162),g("click",function(){_(e);let l=d(2);return v(l.selectFiles())}),n(87,"mat-icon"),u(88),i(),u(89),i()(),n(90,"input",163),g("change",function(l){_(e);let m=d(2);return v(m.onModalFileSelected(l))}),i(),n(91,"div",164),u(92," \u041C\u043E\u0436\u0435\u0442\u0435 \u0434\u0430 \u043A\u0430\u0447\u0438\u0442\u0435 \u043D\u044F\u043A\u043E\u043B\u043A\u043E \u0444\u0430\u0439\u043B\u0430 (\u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F: jpg, png, gif \u0438 \u0434\u043E\u043A\u0443\u043C\u0435\u043D\u0442\u0438: pdf). \u041C\u0430\u043A\u0441\u0438\u043C\u0430\u043B\u0435\u043D \u0440\u0430\u0437\u043C\u0435\u0440: 25MB \u043D\u0430 \u0444\u0430\u0439\u043B. "),i(),p(93,mi,4,1,"div",165)(94,pi,2,1,"div",166),i(),n(95,"mat-form-field",167)(96,"mat-label"),u(97,"\u0417\u0430\u0434\u044A\u043B\u0436\u0438\u0442\u0435\u043B\u043D\u0438 \u043F\u043E\u043B\u0435\u0442\u0430 \u0437\u0430 \u0434\u0430 \u0432\u0438 \u043D\u0430\u043F\u0440\u0430\u0432\u044F\u0442 \u043F\u0440\u0435\u0434\u043B\u043E\u0436\u0435\u043D\u0438\u0435"),i(),n(98,"mat-select",168),p(99,fi,2,2,"mat-option",141),i()()()(),n(100,"mat-card-actions",169)(101,"button",170),g("click",function(){_(e);let l=d(2);return v(l.closeCreateRequestModal())}),u(102,"\u041E\u0442\u043A\u0430\u0437"),i(),n(103,"button",171),p(104,xi,2,0,"mat-icon",172)(105,_i,3,1,"span",43)(106,vi,2,0,"span",43),i()()()()}if(r&2){let e,a,l,m,h,E,f,b,R,C,I,$=B(68),O=B(75),x=d(2);s("formGroup",x.requestForm),o(6),y(x.isEditMode?"\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u0430\u0439 \u043F\u0443\u0431\u043B\u0438\u043A\u0430\u0446\u0438\u044F":"\u0421\u044A\u0437\u0434\u0430\u0439 \u043F\u0443\u0431\u043B\u0438\u043A\u0430\u0446\u0438\u044F"),o(5),c("\u041A\u0440\u0435\u0434\u0438\u0442\u0438: ",x.creditsService.getCurrentCredits()),o(5),s("ngIf",x.creditsService.getCurrentCredits()<=1&&!x.isEditMode),o(6),s("value",""),o(2),s("ngForOf",x.userCompanies),o(),s("ngIf",(e=x.requestForm.get("company"))==null?null:e.hasError("required")),o(6),s("ngIf",(a=x.requestForm.get("region"))==null?null:a.hasError("required")),o(),s("ngIf",(l=x.requestForm.get("region"))==null?null:l.hasError("maxlength")),o(15),s("ngIf",(m=x.requestForm.get("requestType"))==null?null:m.hasError("required")),o(),s("ngIf",(h=x.requestForm.get("requestType"))==null?null:h.hasError("maxlength")),o(5),s("ngIf",(E=x.requestForm.get("title"))==null?null:E.hasError("required")),o(),s("ngIf",(f=x.requestForm.get("title"))==null?null:f.hasError("maxlength")),o(5),s("ngIf",(b=x.requestForm.get("description"))==null?null:b.hasError("required")),o(),s("ngIf",(R=x.requestForm.get("description"))==null?null:R.hasError("maxlength")),o(5),s("matDatepicker",$),o(),s("for",$),o(6),s("matDatepicker",O),o(),s("for",O),o(5),s("ngIf",((C=x.requestForm.get("requestType"))==null?null:C.value)==="SHARE_SERVICE"||((C=x.requestForm.get("requestType"))==null?null:C.value)==="LOOKING_FOR_SERVICE"||((C=x.requestForm.get("requestType"))==null?null:C.value)==="BUY"||((C=x.requestForm.get("requestType"))==null?null:C.value)==="SELL"),o(),s("ngIf",((I=x.requestForm.get("requestType"))==null?null:I.value)==="BUY"||((I=x.requestForm.get("requestType"))==null?null:I.value)==="SELL"),o(9),y(x.modalSelectedFiles.length>0?"add":"upload_file"),o(),c(" ",x.modalSelectedFiles.length>0?"\u0414\u043E\u0431\u0430\u0432\u0438 \u043E\u0449\u0435 \u0444\u0430\u0439\u043B\u043E\u0432\u0435":"\u0418\u0437\u0431\u0435\u0440\u0438 \u0444\u0430\u0439\u043B\u043E\u0432\u0435"," "),o(4),s("ngIf",x.modalSelectedFiles.length>0),o(),s("ngIf",x.modalSelectedFiles.length>0),o(5),s("ngForOf",W(31,it)),o(4),s("disabled",x.requestForm.invalid||x.isSubmitting||x.creditsService.getCurrentCredits()<=0)("title",x.creditsService.getCurrentCredits()<=0?"\u041D\u044F\u043C\u0430\u0442\u0435 \u0434\u043E\u0441\u0442\u0430\u0442\u044A\u0447\u043D\u043E \u043A\u0440\u0435\u0434\u0438\u0442\u0438":x.requestForm.invalid?"\u0424\u043E\u0440\u043C\u0430\u0442\u0430 \u0435 \u043D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u0430":"\u041F\u0440\u0435\u0433\u043B\u0435\u0434 \u043F\u0440\u0435\u0434\u0438 \u043F\u0443\u0431\u043B\u0438\u043A\u0443\u0432\u0430\u043D\u0435"),o(),s("ngIf",!x.isSubmitting),o(),s("ngIf",!x.isSubmitting),o(),s("ngIf",x.isSubmitting)}}function yi(r,t){if(r&1){let e=S();n(0,"div",86),g("click",function(){_(e);let l=d();return v(l.closeCreateRequestModal())}),n(1,"div",87),g("click",function(l){return _(e),v(l.stopPropagation())}),p(2,Yt,65,20,"div",88)(3,hi,107,32,"form",89),i()()}if(r&2){let e=d();o(2),s("ngIf",e.showModalPreview),o(),s("ngIf",!e.showModalPreview)}}var tt=class r{constructor(t,e,a,l,m,h,E,f){this.router=t;this.companyRequestService=e;this.companyService=a;this.sanitizer=l;this.http=m;this.fb=h;this.emailVerificationService=E;this.creditsService=f}companyRequests=[];showCancelButton=!1;userCompanies=[];destroy$=new j;showCreateRequestModal=!1;isSubmitting=!1;filePreview=null;previewType="";modalSelectedFiles=[];showModalPreview=!1;modalPreviewData=null;showEditRequestModal=!1;isEditMode=!1;editRequestId=null;pendingEditRequest=null;showConfirmModal=!1;confirmModalData={title:"",message:"",confirmText:"",cancelText:""};pendingDeleteId=null;showSuccessModal=!1;successModalData={title:"",message:"",buttonText:""};requestForm;companyRequest={id:"",title:"",description:"",requesterCompanyId:"",requesterName:"",pictures:[],requestType:"",status:"",availableFrom:new Date,availableTo:new Date,requiredFields:[]};selectedFiles=[];pictureBlobs={};selectedImage=null;showImageDialog=!1;ngOnInit(){this.companyService.getAllCompaniesByUser().pipe(U(this.destroy$)).subscribe({next:t=>{this.userCompanies=t},error:t=>{console.error("Error loading user companies:",t),this.userCompanies=[]}}),this.router.events.pipe(U(this.destroy$),G(t=>t instanceof te)).subscribe(()=>{this.showCancelButton=this.router.url.includes("/create"),this.router.url.includes("/my-requests")&&this.loadRequests()}),this.loadRequests(),this.initializeForm()}initializeForm(){this.requestForm=this.fb.group({company:["",P.required],region:["",P.required],title:["",P.required],requestType:["",P.required],description:["",P.required],activeFrom:[""],activeTo:[""],urgent:[!1],serviceType:[""],capacity:[""],unit:[""],workMode:[""],fixedPrice:[""],priceFrom:[""],priceTo:[""],requiredFields:[[]]})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}getCompanyNameById(t){let e=this.userCompanies.find(a=>String(a.id)===String(t));return e?e.name+" ("+e.vatNumber+")":""}loadRequests(){console.log("\u{1F504} loadRequests() called - making GET /request-company/user");let t=new Date().getTime();console.log("\u{1F552} Using timestamp to prevent cache:",t),this.companyRequestService.getAllRequestsByUser().subscribe({next:e=>{console.log("\u2705 GET /request-company/user completed successfully"),console.log("Received processed user requests data:",e),this.companyRequests=e.map(a=>{if(!a)return console.warn("Found null/undefined request item"),null;let l=a.activeFrom,m=a.activeTo;return Array.isArray(l)&&l.length>=3?l=new Date(l[0],l[1]-1,l[2],l[3]||0,l[4]||0):(typeof l=="string"||typeof l=="number")&&(l=new Date(l)),Array.isArray(m)&&m.length>=3?m=new Date(m[0],m[1]-1,m[2],m[3]||0,m[4]||0):(typeof m=="string"||typeof m=="number")&&(m=new Date(m)),L(N({},a),{activeFrom:l,activeTo:m})}).filter(a=>a!==null),console.log("\u2705 Processed company requests for display, count:",this.companyRequests.length),console.log("\u{1F4CB} Final requests list:",this.companyRequests.map(a=>({id:a.id,title:a.title}))),console.log("\u{1F504} Triggering change detection..."),setTimeout(()=>{console.log("\u26A1 Change detection triggered")},100)},error:e=>{console.error("\u274C Error in GET /request-company/user:",e)}})}viewRequestDetails(t){this.router.navigate(["/requests",t])}deleteRequest(t){console.log("Delete request initiated for ID:",t),this.pendingDeleteId=t,this.showConfirmMessage("\u041F\u043E\u0442\u0432\u044A\u0440\u0436\u0434\u0435\u043D\u0438\u0435","\u0421\u0438\u0433\u0443\u0440\u0435\u043D \u043B\u0438 \u0441\u0438, \u0447\u0435 \u0438\u0441\u043A\u0430\u0448 \u0434\u0430 \u0441\u0432\u0430\u043B\u0438\u0448 \u043F\u0443\u0431\u043B\u0438\u043A\u0430\u0446\u0438\u044F\u0442\u0430?","\u0414\u0430","\u041E\u0442\u043A\u0430\u0437")}showConfirmMessage(t,e,a="\u0414\u0430",l="\u041E\u0442\u043A\u0430\u0437",m=!1){this.confirmModalData={title:t,message:e,confirmText:a,cancelText:l},this.confirmModalData.isEdit=m,this.showConfirmModal=!0}closeConfirmModal(){this.showConfirmModal=!1,this.pendingDeleteId=null,this.pendingEditRequest=null}confirmDeleteAction(){if(this.confirmModalData.isEdit){this.confirmEditAction();return}if(this.pendingDeleteId){let t=this.pendingDeleteId;this.closeConfirmModal(),console.log("\u2705 User confirmed deletion of request:",t),console.log("\u{1F310} Calling DELETE /request-company/"+t),this.companyRequestService.deleteRequest(t).subscribe({next:()=>{console.log("\u2705 Request deleted successfully from backend:",t),console.log("\u{1F504} Reloading requests from backend after successful deletion..."),this.loadRequests(),this.showSuccessMessage("\u0423\u0441\u043F\u0435\u0445","\u041F\u0443\u0431\u043B\u0438\u043A\u0430\u0446\u0438\u044F\u0442\u0430 \u0435 \u0441\u0432\u0430\u043B\u0435\u043D\u0430 \u0443\u0441\u043F\u0435\u0448\u043D\u043E!","\u041E\u041A")},error:e=>{if(console.error("\u274C Error deleting request:",e),console.log("\u{1F50D} Error details:"),console.log("Status:",e.status),console.log("Error object:",e.error),console.log("Error message:",e.error?.message),e.status===404)console.log("\u2705 404 detected - treating as already deleted"),console.log("\u{1F504} Reloading requests from backend after 404..."),this.loadRequests(),this.showSuccessMessage("\u0423\u0441\u043F\u0435\u0445","\u041F\u0443\u0431\u043B\u0438\u043A\u0430\u0446\u0438\u044F\u0442\u0430 \u0435 \u0432\u0435\u0447\u0435 \u0441\u0432\u0430\u043B\u0435\u043D\u0430!","\u041E\u041A");else{let a=e?.error?.message||e?.message||"\u041D\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043D\u0430 \u0433\u0440\u0435\u0448\u043A\u0430";this.showSuccessMessage("\u0413\u0440\u0435\u0448\u043A\u0430","\u0413\u0440\u0435\u0448\u043A\u0430 \u043F\u0440\u0438 \u0438\u0437\u0442\u0440\u0438\u0432\u0430\u043D\u0435 \u043D\u0430 \u043F\u0443\u0431\u043B\u0438\u043A\u0430\u0446\u0438\u044F\u0442\u0430: "+a,"\u041E\u041A")}}})}}showSuccessMessage(t,e,a="\u041E\u041A"){this.successModalData={title:t,message:e,buttonText:a},this.showSuccessModal=!0}closeSuccessModal(){this.showSuccessModal=!1}editRequest(t){if(t.responsesCount&&t.responsesCount>0){this.showSuccessMessage("\u0412\u043D\u0438\u043C\u0430\u043D\u0438\u0435","\u041D\u0435 \u043C\u043E\u0436\u0435\u0442\u0435 \u0434\u0430 \u0440\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u0430\u0442\u0435 \u043F\u0443\u0431\u043B\u0438\u043A\u0430\u0446\u0438\u044F \u043A\u043E\u044F\u0442\u043E \u0438\u043C\u0430 \u043F\u0440\u0435\u0434\u043B\u043E\u0436\u0435\u043D\u0438\u044F!","\u041E\u041A");return}this.pendingEditRequest=t,this.showConfirmMessage("\u041F\u043E\u0442\u0432\u044A\u0440\u0436\u0434\u0435\u043D\u0438\u0435","\u0421\u0438\u0433\u0443\u0440\u0435\u043D \u043B\u0438 \u0441\u0438, \u0447\u0435 \u0438\u0441\u043A\u0430\u0448 \u0434\u0430 \u0440\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u0430\u0448 \u0442\u0430\u0437\u0438 \u043F\u0443\u0431\u043B\u0438\u043A\u0430\u0446\u0438\u044F?","\u0414\u0430","\u041E\u0442\u043A\u0430\u0437",!0)}confirmEditAction(){if(this.pendingEditRequest){let t=this.pendingEditRequest;this.closeConfirmModal(),this.openEditRequestModal(t)}}openEditRequestModal(t){this.isEditMode=!0,this.editRequestId=t.id;let e=this.userCompanies.find(a=>a.id===t.requesterCompanyId);this.requestForm.patchValue({company:e?.vatNumber||"",region:t.region||"",title:t.title||"",requestType:t.requestType||"",description:t.description||"",activeFrom:t.availableFrom?this.formatDateForPicker(t.availableFrom):null,activeTo:t.availableTo?this.formatDateForPicker(t.availableTo):null,urgent:t.urgent||!1,serviceType:t.serviceType||"",capacity:t.capacity||"",unit:t.unit||"",workMode:t.workMode||"",fixedPrice:t.fixedPrice||"",priceFrom:t.priceFrom||"",priceTo:t.priceTo||"",requiredFields:t.requiredFields||[]}),this.modalSelectedFiles=[],this.showEditRequestModal=!0,document.body.style.overflow="hidden"}closeEditRequestModal(){this.showEditRequestModal=!1,this.isEditMode=!1,this.editRequestId=null,this.pendingEditRequest=null,document.body.style.overflow="auto",this.resetForm()}submitEditRequest(){if(console.log("\u{1F3AF} submitEditRequest called - showing preview"),this.requestForm.invalid){this.showSuccessMessage("\u0412\u043D\u0438\u043C\u0430\u043D\u0438\u0435","\u041C\u043E\u043B\u044F, \u043F\u043E\u043F\u044A\u043B\u043D\u0435\u0442\u0435 \u0432\u0441\u0438\u0447\u043A\u0438 \u0437\u0430\u0434\u044A\u043B\u0436\u0438\u0442\u0435\u043B\u043D\u0438 \u043F\u043E\u043B\u0435\u0442\u0430.","\u041E\u041A");return}this.showEditRequestPreview()}showEditRequestPreview(){console.log("\u{1F50D} showEditRequestPreview() called");let t=this.requestForm.value,e=this.userCompanies.find(a=>a.vatNumber===t.company);this.modalPreviewData={companyName:e?.name||"",companyVat:e?.vatNumber||"",title:t.title,region:t.region,requestType:this.getRequestTypeLabel(t.requestType),requestTypeRaw:t.requestType,description:t.description,activeFrom:t.activeFrom,activeTo:t.activeTo,urgent:t.urgent,serviceType:t.serviceType?this.getServiceTypeLabel(t.serviceType):null,capacity:t.capacity,unit:t.unit?this.getUnitLabel(t.unit):null,workMode:t.workMode?this.getWorkModeLabel(t.workMode):null,fixedPrice:t.fixedPrice,priceFrom:t.priceFrom,priceTo:t.priceTo,requiredFields:t.requiredFields||[],files:this.modalSelectedFiles},console.log("\u2705 Setting showModalPreview = true for EDIT"),console.log("\u{1F4E6} Edit modal preview data:",this.modalPreviewData),this.showModalPreview=!0}confirmEditPublish(){if(console.log("\u{1F4E7} Confirming edit publish..."),!this.isEditMode||!this.editRequestId){console.error("\u274C Not in edit mode or missing editRequestId");return}this.processEditFormSubmission()}processEditFormSubmission(){if(this.requestForm.valid&&!this.isSubmitting&&this.editRequestId){console.log("\u2705 Edit form is valid, proceeding...");let t=25*1024*1024,e=this.modalSelectedFiles.filter(h=>h.size>t);if(e.length>0){let h=e.map(E=>`${E.name} (${(E.size/1048576).toFixed(2)}MB)`).join(", ");this.showSuccessMessage("\u0412\u043D\u0438\u043C\u0430\u043D\u0438\u0435",`\u0421\u043B\u0435\u0434\u043D\u0438\u0442\u0435 \u0444\u0430\u0439\u043B\u043E\u0432\u0435 \u0441\u0430 \u0442\u0432\u044A\u0440\u0434\u0435 \u0433\u043E\u043B\u0435\u043C\u0438: ${h}. \u041C\u0430\u043A\u0441\u0438\u043C\u0430\u043B\u043D\u0438\u044F\u0442 \u0440\u0430\u0437\u043C\u0435\u0440 \u0435 25MB \u043D\u0430 \u0444\u0430\u0439\u043B.`,"\u041E\u041A");return}this.isSubmitting=!0;let a=new FormData,l=this.requestForm.value;console.log("\u{1F4DD} Edit form values:",l);let m=this.userCompanies.find(h=>h.vatNumber===l.company);if(console.log("\u{1F3E2} Edit selected company:",m),m){console.log("\u2705 Company found in edit, preparing request data...");let h=f=>{if(!f)return null;let b=new Date(f),R=b.getFullYear(),C=(b.getMonth()+1).toString().padStart(2,"0"),I=b.getDate().toString().padStart(2,"0");return`${R}-${C}-${I}T00:00:00`},E={id:this.editRequestId,requesterName:m.name,requesterCompanyId:m.id,region:l.region,title:l.title,requestType:l.requestType,description:l.description,activeFrom:h(l.activeFrom),activeTo:h(l.activeTo),urgent:l.urgent||!1,serviceType:l.serviceType||"",capacity:l.capacity||"",workMode:l.workMode||"",priceFrom:l.priceFrom||"",priceTo:l.priceTo||"",unit:l.unit||"",requiredFields:l.requiredFields||[]};console.log("\u{1F4CB} Edit request data prepared:",E),a.append("requestCompany",new Blob([JSON.stringify(E)],{type:"application/json"})),this.modalSelectedFiles.length>0?(console.log(`\u{1F4CE} Adding ${this.modalSelectedFiles.length} files from edit:`),this.modalSelectedFiles.forEach((f,b)=>{console.log(`File ${b+1}: ${f.name} (${f.type}, ${f.size} bytes)`),a.append("files",f,f.name)})):console.log("\u{1F4CE} No files attached in edit"),console.log("\u{1F310} Calling companyRequestService.updateRequest..."),this.companyRequestService.updateRequest(this.editRequestId,a).subscribe({next:f=>{console.log("\u2705 Request updated successfully:",f),this.isSubmitting=!1,this.closeEditRequestModal(),this.showModalPreview=!1,this.loadRequests(),this.showSuccessMessage("\u0423\u0441\u043F\u0435\u0445","\u041F\u0443\u0431\u043B\u0438\u043A\u0430\u0446\u0438\u044F\u0442\u0430 \u0435 \u0440\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u0430\u043D\u0430 \u0443\u0441\u043F\u0435\u0448\u043D\u043E!","\u041E\u041A")},error:f=>{console.error("\u274C Error updating request:",f),this.isSubmitting=!1,this.showSuccessMessage("\u0413\u0440\u0435\u0448\u043A\u0430","\u0413\u0440\u0435\u0448\u043A\u0430 \u043F\u0440\u0438 \u0440\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u0430\u043D\u0435 \u043D\u0430 \u043F\u0443\u0431\u043B\u0438\u043A\u0430\u0446\u0438\u044F: "+(f.message||f.error?.message||"\u041D\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043D\u0430 \u0433\u0440\u0435\u0448\u043A\u0430"),"\u041E\u041A")}})}else console.error("\u274C No company selected in edit!"),this.isSubmitting=!1,this.showSuccessMessage("\u0412\u043D\u0438\u043C\u0430\u043D\u0438\u0435","\u041C\u043E\u043B\u044F, \u0438\u0437\u0431\u0435\u0440\u0435\u0442\u0435 \u0444\u0438\u0440\u043C\u0430!","\u041E\u041A")}else console.log("\u274C Edit form is invalid or already submitting"),this.requestForm.invalid&&(console.log("Edit form errors:",this.requestForm.errors),Object.keys(this.requestForm.controls).forEach(t=>{let e=this.requestForm.get(t);e&&e.invalid&&console.log(`\u274C Edit field "${t}" is invalid:`,e.errors)}))}formatDateForPicker(t){return t?t instanceof Date?t:typeof t=="string"||typeof t=="number"?new Date(t):Array.isArray(t)&&t.length>=3?new Date(t[0],t[1]-1,t[2]):null:null}onFileSelected(t){let e=t.target;if(e.files){this.selectedFiles=Array.from(e.files);let a=[];this.companyRequest.files||(this.companyRequest.files=[]);for(let l of this.selectedFiles){let m=URL.createObjectURL(l),h=l.type.startsWith("image/");this.companyRequest.files.push({url:m,isImage:h,name:l.name}),h&&a.push(m)}this.companyRequest.pictures=a}}createRequest(){this.router.navigate(["/my-requests/create"])}onCancel(){this.router.navigate(["/my-requests"])}getGridColumns(){return this.companyRequests.length===1?1:this.companyRequests.length===2?2:3}getRowHeight(){return this.companyRequests.length===1?"4:3":this.companyRequests.length===2?"3:2":"2:1"}getColSpan(){return this.companyRequests.length===1,1}getRowSpan(){return this.companyRequests.length===1||this.companyRequests.length===2,2}getUnitLabel(t){switch(t){case"count":return"\u0411\u0440.";case"box":return"\u041A\u0430\u0448\u043E\u043D/\u0438";case"pallet":return"\u041F\u0430\u043B\u0435/\u0442\u0430";default:return t||""}}getRequestTypeLabel(t){switch(t){case"LOOKING_FOR_SERVICE":return"\u0422\u044A\u0440\u0441\u044F \u0443\u0441\u043B\u0443\u0433\u0430";case"SHARE_SERVICE":return"\u041F\u0440\u0435\u0434\u043B\u0430\u0433\u0430\u043C \u0443\u0441\u043B\u0443\u0433\u0430";case"BUY":return"\u041A\u0443\u043F\u0443\u0432\u0430\u043C";case"SELL":return"\u041F\u0440\u043E\u0434\u0430\u0432\u0430\u043C";case"OTHER":return"\u0414\u0440\u0443\u0433\u043E";default:return t||""}}getServiceTypeLabel(t){switch(t){case"one_time":return"\u0415\u0434\u043D\u043E\u043A\u0440\u0430\u0442\u043D\u0430";case"permanent":return"\u041F\u043E\u0441\u0442\u043E\u044F\u043D\u043D\u0430";default:return t||""}}getWorkModeLabel(t){switch(t){case"standard":return"\u0421\u0442\u0430\u043D\u0434\u0430\u0440\u0442\u043D\u043E \u0434\u0435\u043B\u043D\u0438\u0447\u043D\u043E";case"extended":return"\u0423\u0434\u044A\u043B\u0436\u0435\u043D\u043E";case"continuous":return"\u041D\u0435\u043F\u0440\u0435\u043A\u044A\u0441\u043D\u0430\u0442\u043E";case"nomatter":return"\u0411\u0435\u0437 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435";default:return t||""}}getStatusLabel(t){switch(t){case"DEAL":return"\u0421\u0414\u0415\u041B\u041A\u0410";case"ACTIVE":return"\u0410\u041A\u0422\u0418\u0412\u041D\u0410";case"CLOSED":return"\u041F\u0420\u0418\u041A\u041B\u042E\u0427\u0415\u041D\u0410";default:return t||""}}loadAllPictures(){this.companyRequests.forEach(t=>{let e=t.pictureUrls||[];Array.isArray(e)&&e.forEach(a=>{a&&!this.pictureBlobs[a]&&this.fetchPicture(a)})})}fetchPicture(t){let e=this.getPictureUrl(t);this.http.get(e,{responseType:"blob"}).subscribe(a=>{let l=this.sanitizer.bypassSecurityTrustUrl(URL.createObjectURL(a));this.pictureBlobs[t]=l})}getPictureUrl(t){if(!t)return"";if(t.startsWith("http"))return t;let e=t.replace(/\\/g,"/");return e=e.replace(/^\/+/,""),e.startsWith("files/")&&(e=e.substring(6)),`${ke.apiUrl}/files/${e}`}onImageClick(t){this.selectedImage=this.pictureBlobs[t]||this.getPictureUrl(t),this.showImageDialog=!0}closeImageDialog(){this.showImageDialog=!1,this.selectedImage=null}getPictureUrls(t){return Array.isArray(t.pictureUrls)?t.pictureUrls:[]}openCreateRequestModal(){this.isEditMode=!1,this.editRequestId=null,this.showCreateRequestModal=!0,document.body.style.overflow="hidden"}closeCreateRequestModal(){this.showCreateRequestModal=!1,this.showEditRequestModal=!1,this.isEditMode=!1,this.editRequestId=null,document.body.style.overflow="auto",this.resetForm()}resetForm(){this.requestForm.reset({company:"",region:"",title:"",requestType:"",description:"",activeFrom:"",activeTo:"",urgent:!1,serviceType:"",capacity:"",unit:"",workMode:"",priceFrom:"",priceTo:"",requiredFields:[]}),this.filePreview=null,this.previewType="",this.modalSelectedFiles=[];let t=document.getElementById("modalAttachment");t&&(t.value="")}selectFiles(){let t=document.getElementById("modalAttachment");t&&t.click()}onModalFileSelected(t){let e=t.target;if(e.files){let a=Array.from(e.files);this.addFilesToArray(a),e.value=""}}addFilesToArray(t){t.forEach(a=>{if(a.size>26214400){this.showSuccessMessage("\u0412\u043D\u0438\u043C\u0430\u043D\u0438\u0435",`\u0424\u0430\u0439\u043B\u044A\u0442 "${a.name}" \u0435 \u0442\u0432\u044A\u0440\u0434\u0435 \u0433\u043E\u043B\u044F\u043C (${(a.size/(1024*1024)).toFixed(2)}MB). \u041C\u0430\u043A\u0441\u0438\u043C\u0430\u043B\u043D\u0438\u044F\u0442 \u0440\u0430\u0437\u043C\u0435\u0440 \u0435 25MB.`,"\u041E\u041A"),console.warn("Modal file too large:",a.name,`${(a.size/(1024*1024)).toFixed(2)}MB`);return}if(!a.type.startsWith("image/")&&a.type!=="application/pdf"){this.showSuccessMessage("\u0412\u043D\u0438\u043C\u0430\u043D\u0438\u0435","\u041D\u0435\u043F\u043E\u0434\u0434\u044A\u0440\u0436\u0430\u043D \u0442\u0438\u043F \u0444\u0430\u0439\u043B: "+a.name+". \u041C\u043E\u043B\u044F, \u0438\u0437\u043F\u043E\u043B\u0437\u0432\u0430\u0439\u0442\u0435 \u0441\u0430\u043C\u043E \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F \u0438\u043B\u0438 PDF \u0444\u0430\u0439\u043B\u043E\u0432\u0435.","\u041E\u041A"),console.warn("Unsupported file type ignored in modal:",a.type);return}this.modalSelectedFiles.some(m=>m.name===a.name&&m.size===a.size&&m.lastModified===a.lastModified)?console.warn("Modal file already selected, skipping:",a.name):(this.modalSelectedFiles.push(a),console.log("Modal file added:",a.name,`${(a.size/(1024*1024)).toFixed(2)}MB`))}),this.updateFilePreview()}updateFilePreview(){let t=this.modalSelectedFiles.find(e=>e.type.startsWith("image/"));if(t){let e=new FileReader;e.onload=a=>{this.filePreview=a.target.result,this.previewType="image"},e.readAsDataURL(t)}else this.modalSelectedFiles.length>0?(this.modalSelectedFiles[0].type==="application/pdf"?this.previewType="pdf":this.previewType="file",this.filePreview="preview"):(this.filePreview=null,this.previewType="")}onSubmitRequest(){if(console.log("\u{1F3AF} Modal onSubmitRequest called - showing preview"),this.isEditMode){this.submitEditRequest();return}if(this.creditsService.getCurrentCredits()<=0){this.showSuccessMessage("\u0412\u043D\u0438\u043C\u0430\u043D\u0438\u0435","\u041D\u044F\u043C\u0430\u0442\u0435 \u0434\u043E\u0441\u0442\u0430\u0442\u044A\u0447\u043D\u043E \u043A\u0440\u0435\u0434\u0438\u0442\u0438 \u0437\u0430 \u0441\u044A\u0437\u0434\u0430\u0432\u0430\u043D\u0435 \u043D\u0430 \u043F\u0443\u0431\u043B\u0438\u043A\u0430\u0446\u0438\u044F. \u041C\u043E\u043B\u044F, \u0437\u0430\u043A\u0443\u043F\u0435\u0442\u0435 \u043A\u0440\u0435\u0434\u0438\u0442\u0438.","\u041E\u041A");return}if(this.requestForm.invalid){this.showSuccessMessage("\u0412\u043D\u0438\u043C\u0430\u043D\u0438\u0435","\u041C\u043E\u043B\u044F, \u043F\u043E\u043F\u044A\u043B\u043D\u0435\u0442\u0435 \u0432\u0441\u0438\u0447\u043A\u0438 \u0437\u0430\u0434\u044A\u043B\u0436\u0438\u0442\u0435\u043B\u043D\u0438 \u043F\u043E\u043B\u0435\u0442\u0430.","\u041E\u041A");return}this.showModalRequestPreview()}showModalRequestPreview(){console.log("\u{1F50D} showModalRequestPreview() called");let t=this.requestForm.value,e=this.userCompanies.find(a=>a.vatNumber===t.company);this.modalPreviewData={companyName:e?.name||"",companyVat:e?.vatNumber||"",title:t.title,region:t.region,requestType:this.getRequestTypeLabel(t.requestType),requestTypeRaw:t.requestType,description:t.description,activeFrom:t.activeFrom,activeTo:t.activeTo,urgent:t.urgent,serviceType:t.serviceType?this.getServiceTypeLabel(t.serviceType):null,capacity:t.capacity,unit:t.unit?this.getUnitLabel(t.unit):null,workMode:t.workMode?this.getWorkModeLabel(t.workMode):null,fixedPrice:t.fixedPrice,priceFrom:t.priceFrom,priceTo:t.priceTo,requiredFields:t.requiredFields||[],files:this.modalSelectedFiles},console.log("\u2705 Setting showModalPreview = true"),console.log("\u{1F4E6} Modal preview data:",this.modalPreviewData),this.showModalPreview=!0,console.log("\u{1F4CA} showModalPreview is now:",this.showModalPreview)}confirmModalPublish(){if(this.isEditMode){this.confirmEditPublish();return}console.log("\u{1F4E7} Checking email verification before modal publish..."),this.emailVerificationService.checkVerificationOrPrompt().subscribe({next:t=>{if(console.log("\u{1F4E7} Modal email verification result:",t),!t){console.log("\u274C Cannot proceed with modal request - email verification failed"),this.showModalPreview=!1;return}console.log("\u2705 Modal email verification passed, proceeding to form submission"),this.processModalFormSubmission()},error:t=>{console.error("\u274C Error during modal email verification check:",t),this.showModalPreview=!1}})}cancelModalPreview(){this.showModalPreview=!1}processModalFormSubmission(){if(this.requestForm.valid&&!this.isSubmitting){console.log("\u2705 Modal form is valid, proceeding...");let t=25*1024*1024,e=this.modalSelectedFiles.filter(h=>h.size>t);if(e.length>0){let h=e.map(E=>`${E.name} (${(E.size/1048576).toFixed(2)}MB)`).join(", ");this.showSuccessMessage("\u0412\u043D\u0438\u043C\u0430\u043D\u0438\u0435",`\u0421\u043B\u0435\u0434\u043D\u0438\u0442\u0435 \u0444\u0430\u0439\u043B\u043E\u0432\u0435 \u0441\u0430 \u0442\u0432\u044A\u0440\u0434\u0435 \u0433\u043E\u043B\u0435\u043C\u0438: ${h}. \u041C\u0430\u043A\u0441\u0438\u043C\u0430\u043B\u043D\u0438\u044F\u0442 \u0440\u0430\u0437\u043C\u0435\u0440 \u0435 25MB \u043D\u0430 \u0444\u0430\u0439\u043B.`,"\u041E\u041A");return}this.isSubmitting=!0;let a=new FormData,l=this.requestForm.value;console.log("\u{1F4DD} Modal form values:",l);let m=this.userCompanies.find(h=>h.vatNumber===l.company);if(console.log("\u{1F3E2} Modal selected company:",m),m){console.log("\u2705 Company found in modal, preparing request data...");let h=f=>{if(!f)return null;let b=new Date(f),R=b.getFullYear(),C=(b.getMonth()+1).toString().padStart(2,"0"),I=b.getDate().toString().padStart(2,"0");return`${R}-${C}-${I}T00:00:00`},E={requesterName:m.name,requesterCompanyId:m.id,region:l.region,title:l.title,requestType:l.requestType,description:l.description,activeFrom:h(l.activeFrom),activeTo:h(l.activeTo),urgent:l.urgent||!1,serviceType:l.serviceType||"",capacity:l.capacity||"",workMode:l.workMode||"",priceFrom:l.priceFrom||"",priceTo:l.priceTo||"",unit:l.unit||"",requiredFields:l.requiredFields||[]};console.log("\u{1F4CB} Modal request data prepared:",E),a.append("requestCompany",new Blob([JSON.stringify(E)],{type:"application/json"})),this.modalSelectedFiles.length>0?(console.log(`\u{1F4CE} Adding ${this.modalSelectedFiles.length} files from modal:`),this.modalSelectedFiles.forEach((f,b)=>{console.log(`File ${b+1}: ${f.name} (${f.type}, ${f.size} bytes)`),a.append("files",f,f.name)})):console.log("\u{1F4CE} No files attached in modal"),console.log("\u{1F310} Modal calling companyRequestService.createRequest..."),this.companyRequestService.createRequest(a).subscribe({next:f=>{console.log("\u2705 Modal request created successfully:",f),this.isSubmitting=!1,this.closeCreateRequestModal(),this.creditsService.decrementCredits(),this.loadRequests()},error:f=>{console.error("\u274C Modal error creating request:",f),this.isSubmitting=!1,this.showSuccessMessage("\u0413\u0440\u0435\u0448\u043A\u0430","\u0413\u0440\u0435\u0448\u043A\u0430 \u043F\u0440\u0438 \u0441\u044A\u0437\u0434\u0430\u0432\u0430\u043D\u0435 \u043D\u0430 \u043F\u0443\u0431\u043B\u0438\u043A\u0430\u0446\u0438\u044F: "+(f.message||f.error?.message||"\u041D\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043D\u0430 \u0433\u0440\u0435\u0448\u043A\u0430"),"\u041E\u041A")}})}else console.error("\u274C No company selected in modal!"),this.isSubmitting=!1,this.showSuccessMessage("\u0412\u043D\u0438\u043C\u0430\u043D\u0438\u0435","\u041C\u043E\u043B\u044F, \u0438\u0437\u0431\u0435\u0440\u0435\u0442\u0435 \u0444\u0438\u0440\u043C\u0430!","\u041E\u041A")}else console.log("\u274C Modal form is invalid or already submitting"),this.requestForm.invalid&&(console.log("Modal form errors:",this.requestForm.errors),Object.keys(this.requestForm.controls).forEach(t=>{let e=this.requestForm.get(t);e&&e.invalid&&console.log(`\u274C Modal field "${t}" is invalid:`,e.errors)}))}removeFile(t){if(this.modalSelectedFiles.splice(t,1),this.modalSelectedFiles.length===0){this.filePreview=null,this.previewType="";let e=document.getElementById("modalAttachment");e&&(e.value="")}else this.updateFilePreview()}static \u0275fac=function(e){return new(e||r)(q(ne),q(Ae),q(Pe),q(ee),q(Z),q(pe),q(Xe),q(Ue))};static \u0275cmp=H({type:r,selectors:[["app-user-requests"]],decls:20,vars:6,consts:[["pickerFrom",""],["pickerTo",""],[2,"display","flex","justify-content","space-between","align-items","center","margin-bottom","24px"],[2,"flex","1"],[2,"margin","0","display","flex","align-items","center","justify-content","center","flex","1"],[2,"font-size","20px","margin-left","6px","color","#1976d2"],[2,"flex","1","display","flex","justify-content","flex-end"],["mat-raised-button","","color","accent",2,"display","flex","align-items","center","gap","6px",3,"click"],[1,"card-grid",2,"display","flex","flex-wrap","wrap","gap","24px","justify-content","center"],["class","example-card","appearance","outlined","style","width: 370px; min-width: 320px; max-width: 100%; box-shadow: 0 2px 12px #0002; border-radius: 14px; position: relative;",3,"background",4,"ngFor","ngForOf"],[2,"margin-top","auto","padding","10px","text-align","center"],["mat-raised-button","","color","warn",3,"click",4,"ngIf"],["class","image-dialog-overlay","style","position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: rgba(0,0,0,0.7); z-index: 1000; display: flex; align-items: center; justify-content: center;",3,"click",4,"ngIf"],["class","success-modal-overlay","style","position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: rgba(0,0,0,0.5); z-index: 3000; display: flex; align-items: center; justify-content: center; animation: fadeIn 0.3s ease-out;",3,"click",4,"ngIf"],["class","confirm-modal-overlay","style","position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: rgba(0,0,0,0.5); z-index: 3000; display: flex; align-items: center; justify-content: center; animation: fadeIn 0.3s ease-out;",3,"click",4,"ngIf"],["class","modal-overlay","style","position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: rgba(0,0,0,0.5); z-index: 1000; display: flex; align-items: center; justify-content: center; padding: 16px;",3,"click",4,"ngIf"],["appearance","outlined",1,"example-card",2,"width","370px","min-width","320px","max-width","100%","box-shadow","0 2px 12px #0002","border-radius","14px","position","relative"],["class","status-badge-deal","style","position: absolute; top: 12px; right: 12px; background: linear-gradient(135deg, #4caf50, #2e7d32); color: white; padding: 6px 14px; border-radius: 20px; font-size: 0.85rem; font-weight: 600; box-shadow: 0 2px 8px rgba(76, 175, 80, 0.4); z-index: 10; display: flex; align-items: center; gap: 4px;",4,"ngIf"],["mat-card-avatar","","color","primary",2,"background","#e3f2fd","border-radius","50%"],[2,"font-weight","600","font-size","1.2rem","padding-right","100px"],[2,"font-size","0.95rem","color","#1976d2"],["style","display: flex; align-items: center; margin-left: 16px; margin-bottom: 4px; color: #607d8b; font-size: 0.98rem;",4,"ngIf"],[1,"request-details",2,"display","flex","flex-direction","column","gap","6px","margin-top","8px"],["style","display: flex; flex-direction: column;",4,"ngIf"],["style","display: flex; align-items: center;",4,"ngIf"],["class","files-row","style","display: flex; align-items: flex-start; margin-top: 8px;",4,"ngIf"],["style","display: flex; align-items: center; margin-top: 8px; padding: 10px; background-color: #fff3e0; border-left: 4px solid #ff9800; border-radius: 4px;",4,"ngIf"],["class","pictures-row","style","display: flex; align-items: flex-start; margin-top: 8px;",4,"ngIf"],["align","end"],["mat-stroked-button","","color","primary","style","margin-right: 8px;",3,"disabled","title","click",4,"ngIf"],["mat-stroked-button","","color","warn",3,"click","disabled","title"],["mat-stroked-button","","color","accent",3,"click"],[1,"status-badge-deal",2,"position","absolute","top","12px","right","12px","background","linear-gradient(135deg, #4caf50, #2e7d32)","color","white","padding","6px 14px","border-radius","20px","font-size","0.85rem","font-weight","600","box-shadow","0 2px 8px rgba(76, 175, 80, 0.4)","z-index","10","display","flex","align-items","center","gap","4px"],[2,"font-size","16px","width","16px","height","16px","color","white"],[2,"display","flex","align-items","center","margin-left","16px","margin-bottom","4px","color","#607d8b","font-size","0.98rem"],[2,"font-size","18px","margin-right","6px"],[1,"label"],[1,"value",2,"margin-left","4px","font-weight","500"],[2,"display","flex","flex-direction","column"],[2,"display","flex","align-items","center"],[2,"font-size","18px","margin-right","6px","color","#607d8b"],[2,"padding-left","30px","margin-top","4px"],[1,"value"],[4,"ngIf"],[1,"value",2,"font-weight","500","color","#1976d2"],[1,"files-row",2,"display","flex","align-items","flex-start","margin-top","8px"],[2,"font-size","18px","margin-right","6px","color","#607d8b","margin-top","2px"],[1,"label",2,"margin-right","6px"],[2,"display","flex","gap","10px","flex-wrap","wrap","align-items","flex-start"],[4,"ngFor","ngForOf"],["target","_blank","download","","style","display: block; text-decoration: none;",3,"href","title",4,"ngIf"],["target","_blank","download","","style","display: flex; align-items: center; padding: 6px 12px; background-color: #f5f5f5; border: 1px solid #e0e0e0; border-radius: 4px; color: #333; text-decoration: none; margin-bottom: 4px; box-shadow: 0 1px 3px rgba(0,0,0,0.1);",3,"href","title",4,"ngIf"],["target","_blank","download","",2,"display","block","text-decoration","none",3,"href","title"],[2,"max-width","120px","max-height","120px","border-radius","8px","box-shadow","0 2px 8px #0002","object-fit","cover","border","1px solid #e0e0e0","margin-bottom","4px","cursor","pointer",3,"src","alt"],["target","_blank","download","",2,"display","flex","align-items","center","padding","6px 12px","background-color","#f5f5f5","border","1px solid #e0e0e0","border-radius","4px","color","#333","text-decoration","none","margin-bottom","4px","box-shadow","0 1px 3px rgba(0,0,0,0.1)",3,"href","title"],[2,"color","#f44336","margin-right","8px"],[2,"white-space","nowrap","overflow","hidden","text-overflow","ellipsis","max-width","120px"],[2,"display","flex","align-items","center","margin-top","8px","padding","10px","background-color","#fff3e0","border-left","4px solid #ff9800","border-radius","4px"],[2,"font-size","18px","margin-right","6px","color","#f57c00"],[1,"label",2,"color","#e65100"],[2,"margin-left","8px","font-size","0.9rem","color","#757575"],[1,"pictures-row",2,"display","flex","align-items","flex-start","margin-top","8px"],[2,"display","flex","gap","5px","flex-wrap","wrap"],["alt","\u0421\u043D\u0438\u043C\u043A\u0430","style","max-width: 120px; max-height: 120px; border-radius: 8px; box-shadow: 0 2px 8px #0002; object-fit: cover; border: 1px solid #e0e0e0; margin-bottom: 4px; cursor: pointer;",3,"src","click",4,"ngIf"],["alt","\u0421\u043D\u0438\u043C\u043A\u0430",2,"max-width","120px","max-height","120px","border-radius","8px","box-shadow","0 2px 8px #0002","object-fit","cover","border","1px solid #e0e0e0","margin-bottom","4px","cursor","pointer",3,"click","src"],["mat-stroked-button","","color","primary",2,"margin-right","8px",3,"click","disabled","title"],["mat-raised-button","","color","warn",3,"click"],[1,"image-dialog-overlay",2,"position","fixed","top","0","left","0","width","100vw","height","100vh","background","rgba(0,0,0,0.7)","z-index","1000","display","flex","align-items","center","justify-content","center",3,"click"],["alt","\u0413\u043E\u043B\u044F\u043C\u0430 \u0441\u043D\u0438\u043C\u043A\u0430",2,"max-width","90vw","max-height","90vh","border-radius","12px","box-shadow","0 4px 32px #0008","background","#fff","padding","8px",3,"click","src"],[2,"position","absolute","top","32px","right","48px","background","#fff","border","none","border-radius","50%","width","40px","height","40px","box-shadow","0 2px 8px #0003","cursor","pointer","font-size","1.5rem","color","#1976d2",3,"click"],[1,"success-modal-overlay",2,"position","fixed","top","0","left","0","width","100vw","height","100vh","background","rgba(0,0,0,0.5)","z-index","3000","display","flex","align-items","center","justify-content","center","animation","fadeIn 0.3s ease-out",3,"click"],[1,"success-modal-content",2,"background","white","border-radius","16px","min-width","400px","max-width","90vw","max-height","80vh","overflow-y","auto","box-shadow","0 20px 60px rgba(0,0,0,0.3)","animation","slideInScale 0.4s cubic-bezier(0.34, 1.56, 0.64, 1)",3,"click"],[2,"padding","24px 24px 16px 24px","text-align","center","border-bottom","1px solid #f0f0f0"],[2,"width","60px","height","60px","margin","0 auto 16px","background","linear-gradient(135deg, #4caf50, #2e7d32)","border-radius","50%","display","flex","align-items","center","justify-content","center","animation","bounceIn 0.6s ease-out 0.2s both"],[2,"color","white","font-size","28px","width","28px","height","28px"],[2,"margin","0","font-size","1.4rem","font-weight","600","color","#333"],[2,"padding","20px 24px"],[2,"margin","0","font-size","1rem","line-height","1.6","color","#666","text-align","center"],[2,"padding","16px 24px 24px","text-align","center"],["mat-raised-button","","color","primary",2,"min-width","100px","font-weight","500","border-radius","8px","text-transform","none",3,"click"],[1,"confirm-modal-overlay",2,"position","fixed","top","0","left","0","width","100vw","height","100vh","background","rgba(0,0,0,0.5)","z-index","3000","display","flex","align-items","center","justify-content","center","animation","fadeIn 0.3s ease-out",3,"click"],[1,"confirm-modal-content",2,"background","white","border-radius","16px","min-width","400px","max-width","90vw","max-height","80vh","overflow-y","auto","box-shadow","0 20px 60px rgba(0,0,0,0.3)","animation","slideInScale 0.4s cubic-bezier(0.34, 1.56, 0.64, 1)",3,"click"],[2,"width","60px","height","60px","margin","0 auto 16px","background","linear-gradient(135deg, #ff9800, #f57c00)","border-radius","50%","display","flex","align-items","center","justify-content","center","animation","bounceIn 0.6s ease-out 0.2s both"],[2,"padding","16px 24px 24px","text-align","center","display","flex","gap","12px","justify-content","center"],["mat-button","",2,"min-width","100px","font-weight","500","border-radius","8px","text-transform","none",3,"click"],["mat-raised-button","","color","warn",2,"min-width","100px","font-weight","500","border-radius","8px","text-transform","none",3,"click"],[1,"modal-overlay",2,"position","fixed","top","0","left","0","width","100vw","height","100vh","background","rgba(0,0,0,0.5)","z-index","1000","display","flex","align-items","center","justify-content","center","padding","16px",3,"click"],[1,"modal-content",2,"background","white","border-radius","12px","max-width","600px","width","100%","max-height","90vh","overflow-y","auto","box-shadow","0 4px 32px rgba(0,0,0,0.2)",3,"click"],["style","padding: 20px;",4,"ngIf"],["enctype","multipart/form-data","class","request-form",3,"formGroup","ngSubmit",4,"ngIf"],[2,"padding","20px"],[2,"box-shadow","none"],[2,"display","flex","justify-content","space-between","align-items","center","padding-bottom","16px","border-bottom","2px solid #667eea"],[2,"background","linear-gradient(135deg, #667eea 0%, #764ba2 100%)","-webkit-background-clip","text","-webkit-text-fill-color","transparent","background-clip","text","font-size","1.3rem","font-weight","600"],[2,"vertical-align","middle","margin-right","8px","color","#667eea"],["type","button","mat-icon-button","",3,"click"],[2,"padding-top","20px"],[2,"background","#fffbea","border-left","4px solid #f59e0b","padding","12px 16px","margin-bottom","20px","border-radius","4px"],[2,"display","flex","align-items","center","gap","8px","color","#92400e","font-weight","500"],[2,"color","#f59e0b"],[2,"box-shadow","0 2px 12px #0002","border-radius","14px","margin-bottom","20px"],[2,"background","linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%)","margin","-16px -16px 16px","padding","16px","border-radius","14px 14px 0 0"],["mat-card-avatar","",2,"background","#1976d2","color","white","width","40px","height","40px","display","flex","align-items","center","justify-content","center","border-radius","50%"],[2,"margin","0","font-size","1.1rem","color","#333"],[2,"margin","4px 0 0","color","#666"],["style","display: inline-block; background: #ff5252; color: white; padding: 4px 12px; border-radius: 16px; font-size: 0.85rem; font-weight: 600; margin-bottom: 12px;",4,"ngIf"],[2,"margin","0 0 12px","color","#1976d2","font-size","1.4rem"],[2,"display","grid","gap","12px","margin-top","16px","font-size","0.95rem"],[2,"display","flex","align-items","center","gap","8px","color","#555"],[2,"color","#1976d2"],[2,"color","#333","margin-top","8px","padding","12px","background","#f5f9ff","border-radius","8px","border-left","4px solid #1976d2"],[2,"display","block","margin-bottom","8px","color","#1976d2"],[2,"margin","0","white-space","pre-wrap","line-height","1.6"],["style","display: flex; align-items: center; gap: 8px; color: #555;",4,"ngIf"],["style","margin-top: 12px; padding: 12px; background: #fff3cd; border-radius: 8px; border-left: 4px solid #ffc107;",4,"ngIf"],["style","margin-top: 12px;",4,"ngIf"],["align","end",2,"padding","16px","background","#f5f5f5","border-radius","0 0 12px 12px"],["mat-raised-button","","color","warn","type","button",2,"margin-right","12px",3,"click"],[2,"margin-right","4px"],["mat-raised-button","","color","primary","type","button",3,"click"],[2,"display","inline-block","background","#ff5252","color","white","padding","4px 12px","border-radius","16px","font-size","0.85rem","font-weight","600","margin-bottom","12px"],[2,"font-size","16px","width","16px","height","16px","vertical-align","middle","margin-right","4px"],[2,"margin-top","12px","padding","12px","background","#fff3cd","border-radius","8px","border-left","4px solid #ffc107"],[2,"display","block","margin-bottom","8px","color","#856404"],[2,"display","flex","flex-wrap","wrap","gap","8px"],["style","background: white; padding: 4px 12px; border-radius: 16px; font-size: 0.85rem; border: 1px solid #ffc107;",4,"ngFor","ngForOf"],[2,"background","white","padding","4px 12px","border-radius","16px","font-size","0.85rem","border","1px solid #ffc107"],[2,"margin-top","12px"],["style","display: flex; align-items: center; gap: 4px; padding: 6px 12px; background: #e3f2fd; border-radius: 16px; font-size: 0.85rem;",4,"ngFor","ngForOf"],[2,"display","flex","align-items","center","gap","4px","padding","6px 12px","background","#e3f2fd","border-radius","16px","font-size","0.85rem"],[2,"font-size","18px","width","18px","height","18px"],["enctype","multipart/form-data",1,"request-form",3,"ngSubmit","formGroup"],[2,"display","flex","justify-content","space-between","align-items","center","padding","16px"],[2,"display","flex","justify-content","space-between","align-items","center","width","100%"],[2,"display","flex","align-items","center","gap","8px","font-size","14px","color","#2196F3","font-weight","500","margin-right","40px"],[2,"font-size","18px"],["style","background: #fff3cd; border: 1px solid #ffeaa7; border-radius: 8px; padding: 12px; margin-bottom: 16px; display: flex; align-items: center; gap: 8px;",4,"ngIf"],[1,"form-fields"],["appearance","fill",2,"width","100%"],["formControlName","company","required",""],[3,"value"],[3,"value",4,"ngFor","ngForOf"],[2,"display","flex","gap","16px","width","100%"],["appearance","fill",2,"flex","1"],["matInput","","formControlName","region","required","","maxlength","50"],["formControlName","requestType","required",""],["value","LOOKING_FOR_SERVICE"],["value","SHARE_SERVICE"],["value","BUY"],["value","SELL"],["value","OTHER"],["matInput","","formControlName","title","required","","maxlength","255"],["matInput","","formControlName","description","rows","3","required","","maxlength","500"],[2,"display","flex","gap","16px","align-items","center","width","100%"],["matInput","","formControlName","activeFrom","placeholder","\u0434\u0434.\u043C\u043C.\u0433\u0433\u0433\u0433",3,"matDatepicker"],["matSuffix","",3,"for"],["matInput","","formControlName","activeTo","placeholder","\u0434\u0434.\u043C\u043C.\u0433\u0433\u0433\u0433",3,"matDatepicker"],["formControlName","urgent",2,"margin-left","16px"],[1,"file-upload",2,"margin","16px 0","border","2px solid #1976d2","padding","15px","border-radius","8px","background-color","#f5f9ff"],[2,"display","flex","align-items","center","gap","12px","margin-bottom","10px"],[2,"font-weight","600","color","#1976d2","font-size","16px","display","flex","align-items","center"],[2,"vertical-align","middle","margin-right","8px"],["mat-stroked-button","","color","primary","type","button",3,"click"],["type","file","id","modalAttachment","accept","image/*,.pdf,.doc,.docx,.txt","multiple","",2,"display","none",3,"change"],[1,"file-hint",2,"font-size","0.85rem","margin-bottom","10px","color","#666"],["style","margin: 10px 0; color: green; font-weight: 500; display: flex; align-items: center;",4,"ngIf"],["style","margin: 10px 0; border: 1px solid #e0e0e0; border-radius: 4px; padding: 8px; max-height: 200px; overflow-y: auto;",4,"ngIf"],["appearance","fill",2,"width","100%","margin-top","18px"],["formControlName","requiredFields","multiple",""],[2,"display","flex","justify-content","flex-end","gap","12px","padding","16px"],["mat-button","","color","warn","type","button",3,"click"],["mat-raised-button","","color","primary","type","submit",3,"disabled","title"],["style","margin-right: 4px;",4,"ngIf"],[2,"background","#fff3cd","border","1px solid #ffeaa7","border-radius","8px","padding","12px","margin-bottom","16px","display","flex","align-items","center","gap","8px"],[2,"color","#e17055"],[2,"color","#d63031","font-weight","500"],[2,"margin-top","10px","display","block"],["formControlName","serviceType"],["value","one_time"],["value","permanent"],[2,"display","flex","gap","16px","align-items","flex-end"],["matInput","","type","number","formControlName","capacity","placeholder","\u0412\u044A\u0432\u0435\u0434\u0435\u0442\u0435 \u0447\u0438\u0441\u043B\u043E"],["formControlName","unit"],["value","count"],["value","box"],["value","pallet"],["appearance","fill",4,"ngIf"],["appearance","fill"],["formControlName","workMode"],["value","nomatter"],["value","standard"],["value","extended"],["value","continuous"],["matInput","","type","number","formControlName","fixedPrice"],[2,"display","flex","gap","10px","align-items","flex-end"],["matInput","","type","number","formControlName","priceFrom"],["matInput","","type","number","formControlName","priceTo"],[2,"margin","10px 0","color","green","font-weight","500","display","flex","align-items","center"],[2,"margin-right","8px"],[2,"margin","10px 0","border","1px solid #e0e0e0","border-radius","4px","padding","8px","max-height","200px","overflow-y","auto"],["style","display: flex; align-items: center; justify-content: space-between; margin-bottom: 6px; padding-bottom: 6px; border-bottom: 1px solid #f0f0f0;",4,"ngFor","ngForOf"],[2,"display","flex","align-items","center","justify-content","space-between","margin-bottom","6px","padding-bottom","6px","border-bottom","1px solid #f0f0f0"],[2,"display","flex","align-items","center","overflow","hidden","flex","1"],[2,"font-size","18px","margin-right","8px"],[2,"font-size","0.9rem","overflow","hidden","text-overflow","ellipsis","white-space","nowrap"],["mat-icon-button","","color","warn","type","button",2,"width","24px","height","24px","line-height","24px",3,"click"],["style","color: #f44336;",4,"ngIf"],[2,"color","#f44336"]],template:function(e,a){e&1&&(n(0,"div",2),w(1,"div",3),n(2,"h4",4),u(3," \u041C\u043E\u0438\u0442\u0435 \u041F\u0443\u0431\u043B\u0438\u043A\u0430\u0446\u0438\u0438 "),n(4,"mat-icon",5),u(5,"campaign"),i()(),n(6,"div",6)(7,"button",7),g("click",function(){return a.openCreateRequestModal()}),n(8,"mat-icon"),u(9,"add"),i(),u(10," \u0414\u043E\u0431\u0430\u0432\u0438 \u041F\u0443\u0431\u043B\u0438\u043A\u0430\u0446\u0438\u044F "),i()()(),n(11,"div",8),p(12,Dt,36,28,"mat-card",9),i(),n(13,"div",10),p(14,It,2,0,"button",11),w(15,"router-outlet"),i(),p(16,Rt,4,1,"div",12)(17,Tt,14,3,"div",13)(18,Mt,16,4,"div",14)(19,yi,4,2,"div",15)),e&2&&(o(12),s("ngForOf",a.companyRequests),o(2),s("ngIf",a.showCancelButton),o(2),s("ngIf",a.showImageDialog),o(),s("ngIf",a.showSuccessModal),o(),s("ngIf",a.showConfirmModal),o(),s("ngIf",a.showCreateRequestModal||a.showEditRequestModal))},dependencies:[ie,X,Y,K,Ge,je,Be,Oe,Le,ze,Ne,$e,Ve,_e,ge,xe,he,ve,fe,ae,re,le,ue,oe,me,ce,se,de,Se,Ce,Ee,be,we,Ie,De,Fe,qe,ye,Je,We,Ye,Ke,Qe,et,Ze,Me,Re,Te,J,Q,He],styles:[".status-badge-deal[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse 2s ease-in-out infinite}@keyframes _ngcontent-%COMP%_pulse{0%,to{transform:scale(1);box-shadow:0 2px 8px #4caf5066}50%{transform:scale(1.05);box-shadow:0 4px 16px #4caf5099}}",".response-btn[_ngcontent-%COMP%]{transition:box-shadow .2s,background .2s;border-radius:8px}.response-btn[_ngcontent-%COMP%]:hover{background:#e3f2fd!important;box-shadow:0 2px 8px #1976d2aa}.selected-response[_ngcontent-%COMP%]   .mat-button-focus-overlay[_ngcontent-%COMP%]{background:#bbdefb!important}.response-selected-card[_ngcontent-%COMP%]{border:2.5px solid #1565c0!important;background:#e3f2fd!important;box-shadow:0 2px 12px #1976d2aa;transition:border .2s,background .2s}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_slideInScale{0%{opacity:0;transform:scale(.7) rotateY(-15deg)}to{opacity:1;transform:scale(1) rotateY(0)}}@keyframes _ngcontent-%COMP%_bounceIn{0%{opacity:0;transform:scale(.3) rotate(-15deg)}50%{opacity:.7;transform:scale(1.1) rotate(5deg)}to{opacity:1;transform:scale(1) rotate(0)}}.confirm-modal-overlay[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease-out}.confirm-modal-content[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideInScale .4s cubic-bezier(.34,1.56,.64,1)}"]})};export{tt as UserRequestsComponent};
