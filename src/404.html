<!DOCTYPE html>
<html lang="bg">
<head>
  <meta charset="utf-8">
  <title>XDealHub - Business Platform</title>
  <script>
    // GitHub Pages SPA redirect script
    // This script encodes the current path into a query string and redirects to index.html
    // The main app (index.html) will then restore the correct route from the query string
    (function() {
      // Path segments to keep for subdirectory deployments (0 for root deployment)
      var pathSegmentsToKeep = 0;
      var currentLocation = window.location;
      
      // Construct the base URL (protocol + hostname + port)
      var baseUrl = currentLocation.protocol + '//' + currentLocation.hostname + 
                    (currentLocation.port ? ':' + currentLocation.port : '');
      
      // Extract the base path (for subdirectory deployments)
      // For root deployment (pathSegmentsToKeep = 0), basePath should be empty string
      // because we'll be adding '/?/' next, which already contains the slash
      // Split pathname and filter out empty segments (caused by leading/trailing slashes)
      var pathSegments = currentLocation.pathname.split('/').filter(function(segment) { 
        return segment; // Remove empty strings from split result
      });
      var basePath = pathSegmentsToKeep > 0 ? 
                     '/' + pathSegments.slice(0, pathSegmentsToKeep).join('/') : '';
      
      // Encode the current path by replacing '&' with '~and~' to preserve query string integrity
      // Extract path after base segments (for root deployment, this is the full path minus leading slash)
      var remainingPath = pathSegmentsToKeep > 0 ? 
                          pathSegments.slice(pathSegmentsToKeep).join('/') :
                          pathSegments.join('/');
      var encodedPath = remainingPath.replace(/&/g, '~and~');
      
      // Encode the query string (if any)
      var encodedQuery = currentLocation.search ? 
                         '&' + currentLocation.search.slice(1).replace(/&/g, '~and~') : '';
      
      // Construct redirect URL: base + path + '/?/' + encoded_path + encoded_query + hash
      var redirectUrl = baseUrl + basePath + '/?/' + encodedPath + encodedQuery + currentLocation.hash;
      
      // Redirect to index.html with the encoded path
      window.location.replace(redirectUrl);
    })();
  </script>
</head>
<body>
  <!-- GitHub Pages 404 handler for SPA -->
</body>
</html>
