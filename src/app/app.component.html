<div class="app-shell">
  <div class="app-shell__header">
    <div *ngIf="isOffline" class="offline-banner">
      В момента сте офлайн. Част от данните може да не са актуални.
    </div>

    <app-header 
      [logoSrc]="'assets/images/logo.png?v=2'"
    ></app-header>
  </div>

  <div class="app-shell__content">
    <router-outlet />
  </div>

  <app-footer class="app-shell__footer"></app-footer>
</div>

<button 
  mat-fab 
  color="primary" 
  class="chat-fab"
  (click)="toggleChatSidebar()"
  [matBadge]="unreadCount"
  [matBadgeHidden]="unreadCount === 0"
  matBadgeColor="warn"
  matBadgeSize="small"
  aria-label="Отваряне на чат"
  [attr.aria-description]="'Непрочетени съобщения: ' + unreadCount"
  *ngIf="isAuthenticated"
>
  <mat-icon aria-hidden="true">chat</mat-icon>
</button>

<app-chat-sidebar 
  [isOpen]="chatSidebarOpen" 
  (closeEvent)="closeChatSidebar()"
  *ngIf="isAuthenticated"
></app-chat-sidebar>

<app-cookie-consent></app-cookie-consent>
