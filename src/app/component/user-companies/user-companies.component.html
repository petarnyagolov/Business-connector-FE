<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px;">
  <h4 style="margin: 0;">
    Моите Фирми
    <mat-icon style="font-size: 20px; margin-left: 6px; color: #1976d2; vertical-align: middle;">business</mat-icon>
  </h4>
  
  <button mat-fab color="primary" (click)="openCreateCompanyModal()" title="Добави нова фирма" style="transform: scale(0.8);">
    <mat-icon>add</mat-icon>
  </button>
</div>
<div class="user-companies-container" style="padding-bottom: 90px;">
  <mat-card class="company-detail-card" *ngFor="let company of companies">
    <div class="company-logo-container">
      <ng-container *ngIf="getLogoUrl(company); else noLogo">
        <img [src]="getLogoUrl(company)" alt="{{ company.name }} Logo" class="company-logo-img" />
      </ng-container>
      <ng-template #noLogo>
        <mat-icon style="font-size: 64px;">business</mat-icon>
      </ng-template>
    </div>
    <mat-card-title class="company-title">{{ company.name }}</mat-card-title>
    <mat-card-content>
      <div class="company-detail-list">
        <div class="detail-row"><span class="detail-label">Описание:</span> <span>{{ company.description }}</span></div>
        <div class="detail-row"><span class="detail-label">Индустрия:</span> <span>{{ company.industry }}</span></div>
        <div class="detail-row"><span class="detail-label">Държава:</span> <span>{{ company.country }}</span></div>
        <div class="detail-row"><span class="detail-label">Град:</span> <span>{{ company.city }}</span></div>
        <div class="detail-row"><span class="detail-label">Адрес:</span> <span>{{ company.address }}</span></div>
        <div class="detail-row"><span class="detail-label">Брой служители:</span> <span>{{ getEmployeesSize(company) }}</span></div>
        <div class="detail-row"><span class="detail-label">Позиция на създателя:</span> <span>{{ company.creatorPosition }}</span></div>
      </div>
    </mat-card-content>
    <mat-card-actions>
      <button mat-button (click)="editCompany(company)">Редактирай</button>
    </mat-card-actions>
  </mat-card>
</div>

<div *ngIf="showCreateCompanyModal" class="modal-overlay" (click)="closeCreateCompanyModal()" 
     style="position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: rgba(0,0,0,0.5); z-index: 1000; display: flex; align-items: center; justify-content: center; padding: 16px;">
  <div class="modal-content" (click)="$event.stopPropagation()" 
       style="background: white; border-radius: 12px; max-width: 800px; width: 100%; max-height: 90vh; overflow-y: auto; box-shadow: 0 4px 32px rgba(0,0,0,0.2);">
    
    <div style="display: flex; justify-content: space-between; align-items: center; padding: 20px; border-bottom: 1px solid #e0e0e0;">
      <h3 style="margin: 0; color: #1976d2;">
        <mat-icon style="vertical-align: middle; margin-right: 8px;">add_business</mat-icon>
        Добави нова фирма
      </h3>
      <button mat-icon-button (click)="closeCreateCompanyModal()" title="Затвори">
        <mat-icon>close</mat-icon>
      </button>
    </div>
    
    <div style="padding: 20px;">
      <app-create-company 
        #createCompanyModal
        (companyCreated)="onCompanyCreated()"
        (cancelled)="closeCreateCompanyModal()">
      </app-create-company>
    </div>
  </div>
</div>

<router-outlet></router-outlet>